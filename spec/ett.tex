% generated by Ott 0.28 from: ett.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{tmvar} ,\, \ottmv{x} ,\, \ottmv{y} ,\, \ottmv{f} ,\, \ottmv{m} ,\, \ottmv{n} $ & \ottcom{variables} \\
 $ \ottmv{covar} ,\, \ottmv{c} $ & \ottcom{coercion variables} \\
 $ \ottmv{datacon} ,\, \ottmv{K} $ &  \\
 $ \ottmv{const} ,\, \ottmv{T} ,\, \ottmv{F} $ &  \\
 $ \mathit{index} ,\, \mathit{i} $ & \ottcom{indices} \\
}}

\newcommand{\ottrelflag}{
\ottrulehead{\ottnt{relflag}  ,\ \rho}{::=}{\ottcom{relevance flag}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{+}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{-}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{app\_rho} \, \nu} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \rho  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottappflag}{
\ottrulehead{\ottnt{appflag}  ,\ \nu}{::=}{\ottcom{applicative flag}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\rho}{}{}{}{}}

\newcommand{\ottrole}{
\ottrulehead{\ottnt{role}  ,\ \ottnt{R}}{::=}{\ottcom{Role}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{Nom}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Rep}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{R_{{\mathrm{1}}}}  \cap  \ottnt{R_{{\mathrm{2}}}} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{R_{{\mathrm{1}}}} \wedge \ottnt{R_{{\mathrm{2}}}} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{app\_role} \, \nu \, \ottnt{R}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{R}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottconstraint}{
\ottrulehead{\ottnt{constraint}  ,\ \phi}{::=}{\ottcom{props}}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \phi  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\phi  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{|  \phi  |} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \sim  \ottnt{b}} {\textsf{S}}{}{}{}}

\newcommand{\otttm}{
\ottrulehead{\ottnt{tm}  ,\ \ottnt{a}  ,\ \ottnt{b}  ,\ \ottnt{p}  ,\ \ottnt{v}  ,\ \ottnt{w}  ,\ \ottnt{A}  ,\ \ottnt{B}  ,\ \ottnt{C}}{::=}{\ottcom{types and kinds}}\ottprodnewline
\ottfirstprodline{|}{ \star }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A} . \ottnt{b} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{b} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \  \ottnt{b} ^{ \nu } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{B}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Lambda} \ottmv{c} \!:\! \phi . \ottnt{b} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Lambda} \ottmv{c} . \ottnt{b} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \; \gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall \ottmv{c} \!:\! \phi . \ottnt{B} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \ottnt{B}}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \triangleright _{ \ottnt{R} }  \gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{F}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Box}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\mu}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \; \overline{\mu} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{K}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{match} \, \ottnt{a} \, \ottkw{with} \, \ottnt{brs}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{sub} \, \ottnt{R} \, \ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{coerce}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \  \ottnt{b} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \lbrace  \gamma  \ottsym{/}  \ottmv{c}  \rbrace} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a}  \lbrace  \ottnt{b}   \ottsym{/}   \ottmv{x}   \rbrace } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a}  \lbrace  \gamma   \ottsym{/}   \ottmv{c}  \rbrace } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\theta \, \ottnt{a}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{a}  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} } {\textsf{S}}{}{}{\ottcom{parsing precedence is hard}}\ottprodnewline
\ottprodline{|}{ | \ottnt{a} |_{ \ottnt{R} } } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Int}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Age}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Bool}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Nat}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Vec}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{0}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{S} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{True}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Fix}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Maybe}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Just}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Nothing}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \to  \ottnt{b}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\phi  \Rightarrow  \ottnt{A}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda  \ottmv{x} . \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda  \ottmv{x} \!:\! \ottnt{A} . \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\forall \, \ottmv{x}  \ottsym{:}  \ottnt{A}  \to  \ottnt{B}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \phi \, \ottkw{then} \, \ottnt{a} \, \ottkw{else} \, \ottnt{b}} {\textsf{S}}{}{}{}}

\newcommand{\ottbrs}{
\ottrulehead{\ottnt{brs}}{::=}{\ottcom{case branches}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{none}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{K}  \Rightarrow  \ottnt{a}  \ottsym{;}  \ottnt{brs}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{brs}  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{brs}  \lbrace  \gamma  \ottsym{/}  \ottmv{c}  \rbrace} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{brs}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottco}{
\ottrulehead{\ottnt{co}  ,\ \gamma}{::=}{\ottcom{explicit coercions}}\ottprodnewline
\ottfirstprodline{|}{\bullet}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{red} \, \ottnt{a} \, \ottnt{b}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{refl} \, \ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ ( \ottnt{a} \mathrel{|\!\!=\!\!|}_{ \gamma } \ottnt{b} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{sym} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{{\mathrm{1}}}  \ottsym{;}  \gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{sub} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Pi}^{ \ottnt{R} , \rho } \ottmv{x} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{2}}} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \gamma_{{\mathrm{2}}}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{2}}} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \gamma_{{\mathrm{2}}}}{}{}\ottprodnewline
\ottprodline{|}{ \gamma_{{\mathrm{1}}} \  \gamma_{{\mathrm{2}}} ^{ \ottnt{R} , \rho } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{piFst} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cpiFst} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{isoSnd} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{{\mathrm{1}}}  \ottsym{@}  \gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall \ottmv{c} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{3}}} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \gamma_{{\mathrm{3}}}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda} \ottmv{c} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{3}}} \ottsym{@} \gamma_{{\mathrm{4}}} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \gamma_{{\mathrm{3}}}}{}{}\ottprodnewline
\ottprodline{|}{\gamma  \ottsym{(}  \gamma_{{\mathrm{1}}}  \ottsym{,}  \gamma_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma   \ottsym{@}  ( \gamma_{{\mathrm{1}}}  \sim  \gamma_{{\mathrm{2}}} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma_{{\mathrm{1}}}   \triangleright _{ \ottnt{R} }  \gamma_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma_{{\mathrm{1}}}   \sim _{ \ottnt{A} }  \gamma_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{conv} \  \phi_{{\mathrm{1}}} \sim_ \gamma   \phi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{eta} \, \ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{left} \, \gamma \, \gamma'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{right} \, \gamma \, \gamma'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \gamma  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace} {\textsf{S}}{}{}{}}

\newcommand{\ottApp}{
\ottrulehead{\upsilon}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \nu }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \bullet }{}{}{}{}}

\newcommand{\ottApps}{
\ottrulehead{\overline{\upsilon}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{  }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \overline{\upsilon} \; \upsilon } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \upsilon \; \overline{\upsilon} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \overline{\upsilon}  \ottsym{)}} {\textsf{M}}{}{}{}}

\newcommand{\otttheta}{
\ottrulehead{\theta}{::=}{}\ottprodnewline
\ottfirstprodline{|}{  }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottmv{x}  \mapsto  \mu  ,  \theta }{}{}{}{}}

\newcommand{\ottroleXXcontext}{
\ottrulehead{\ottnt{role\_context}  ,\ \Omega}{::=}{\ottcom{role_contexts}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:}  \ottnt{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Omega , \Omega' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{var\_pat} \, \ottnt{p}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Omega  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Omega } {\textsf{M}}{}{}{}}

\newcommand{\ottroles}{
\ottrulehead{\ottnt{roles}  ,\ \overline{R}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{R}  \ottsym{,}  \overline{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{range} \, \Omega} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \overline{R}  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{R}  \mathop{++}  \overline{R}'} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{  } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{R_{{\mathrm{1}}}} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{R_{{\mathrm{1}}}} ,  \ottnt{R_{{\mathrm{2}}}} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{R_{{\mathrm{1}}}} ,  \ottnt{R_{{\mathrm{2}}}}  ,  \ottnt{R_{{\mathrm{3}}}} } {\textsf{S}}{}{}{}}

\newcommand{\ottsigXXsort}{
\ottrulehead{\ottnt{sig\_sort}}{::=}{\ottcom{signature classifier}}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{A} \  \ottsym{@} \  \overline{R} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{p}  \sim_{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R} }{}{}{}{}}

\newcommand{\ottsort}{
\ottrulehead{\ottnt{sort}}{::=}{\ottcom{binding classifier}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{Tm} \, \ottnt{A}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Co} \, \phi}{}{}{}{}}

\newcommand{\ottcontext}{
\ottrulehead{\ottnt{context}  ,\ \Gamma}{::=}{\ottcom{contexts}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \lbrace  \gamma  \ottsym{/}  \ottmv{c}  \rbrace} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma ,  \Gamma' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{|  \Gamma  |} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Gamma  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma } {\textsf{M}}{}{}{}}

\newcommand{\ottsig}{
\ottrulehead{\ottnt{sig}  ,\ \Sigma}{::=}{\ottcom{signatures}}\ottprodnewline
\ottfirstprodline{|}{ \varnothing }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Sigma  \cup \{ \ottmv{F}  :  \ottnt{sig\_sort} \} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Sigma_0 } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Sigma_1 } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{|  \Sigma  |} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\theta \, \Gamma} {\textsf{M}}{}{}{}}

\newcommand{\ottavailableXXprops}{
\ottrulehead{\ottnt{available\_props}  ,\ \Delta}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \varnothing }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta  \ottsym{,}  \ottmv{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta  \ottsym{,}  \ottmv{c}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathsf{fv}\! \, \ottnt{a}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Delta ,  \Delta' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \widetilde { \Gamma } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \widetilde { \Omega } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Delta  \ottsym{)}} {\textsf{M}}{}{}{}}

\newcommand{\ottNat}{
\ottrulehead{\ottnt{Nat}  ,\ \mathbb{N}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{0}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\Sigma \, \mathbb{N}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \mathbb{N}  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ |  \ottnt{a}  | } {\textsf{S}}{}{}{}}

\newcommand{\ottpatternXXarg}{
\ottrulehead{\mu}{::=}{\ottcom{Pattern arguments}}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{a} ^{ \nu } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma }{}{}{}{}}

\newcommand{\ottpatternXXargs}{
\ottrulehead{\overline{\mu}  ,\ \ottnt{PA}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{  }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mu \; \ottnt{PA} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{PA} \; \mu }{}{}{}{}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \leftrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Leftrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{min} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \equiv }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \in }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \not\in }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Leftarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Rightarrow^{\ast} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \to }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Lambda} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mapsfrom }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Box }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \dashv }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vDash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vDash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vDash_{\mathsf{src} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \neq }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \triangleright }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ \mathsf{ok} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \_ }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto^{\ast} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \varnothing }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \circ }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{fv}\! }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{dom} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \sim }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \asymp }{}{}{}{}\ottprodnewline
\ottprodline{|}{ | }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \bullet }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{fst}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{snd}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{as}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrel{|\Rightarrow|} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash_{=} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbf{refl_2} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathop{++} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \lbrace }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \rbrace }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrel{+\!\!\!\!\!\!\rightarrow} }{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}  ,\ \psi}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:}  \ottnt{A} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:}  \ottnt{R} \, \in \, \Omega}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c}  \ottsym{:}  \phi \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{F}  \ottsym{:}  \ottnt{sig\_sort} \, \in \, \Sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \in \, \Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c} \, \in \, \Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c} \, \ottkw{not} \, \ottkw{relevant} \, \in \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \not\in \, \Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \emph{uniq} \  \Gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \emph{uniq}( \Omega ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c} \, \not\in \, \Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{T} \, \not\in \, \mathsf{dom} \, \Sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{F} \, \not\in \, \mathsf{dom} \, \Sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathbb{N}_{{\mathrm{1}}}  \ottsym{<}  \mathbb{N}_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbb{N}_{{\mathrm{1}}}  \leq  \mathbb{N}_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \nu  = \rho }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{R_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{R_{{\mathrm{2}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \ottsym{=}  \ottnt{b}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\phi_{{\mathrm{1}}}  \ottsym{=}  \phi_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma_{{\mathrm{1}}}  \ottsym{=}  \Gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{{\mathrm{1}}}  \ottsym{=}  \gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \neg  \psi }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \psi_{{\mathrm{1}}}  \wedge  \psi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \psi_{{\mathrm{1}}}  \vee  \psi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \psi_{{\mathrm{1}}}  \Rightarrow  \psi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \psi  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \suppress{ \psi } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c}  \ottsym{:}  \ottsym{(a}  \ottsym{:}  \ottnt{A}  \sim  \ottnt{b}  \ottsym{:}  \ottsym{B)} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{  }{}{}{}{\ottcom{suppress lc hypothesis generated by Ott}}\ottprodnewline
\ottprodline{|}{\Delta  \ottsym{\#}  \Delta_{{\mathrm{2}}}}{}{}{}{}}

\newcommand{\ottJSubRole}{
\ottrulehead{\ottnt{JSubRole}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }{}{}{}{\ottcom{Subroling judgement}}}

\newcommand{\ottJRolePath}{
\ottrulehead{\ottnt{JRolePath}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{RolePath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }{}{}{}{\ottcom{Type headed by constant (partial function)}}}

\newcommand{\ottJAppsPath}{
\ottrulehead{\ottnt{JAppsPath}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{AppsPath}\; \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon} }{}{}{}{\ottcom{Type headed by constant (partial function)}}}

\newcommand{\ottJSat}{
\ottrulehead{\ottnt{JSat}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\overline{\upsilon}  \leftrightarrow  \overline{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}}{}{}{}{}}

\newcommand{\ottJPatCtx}{
\ottrulehead{\ottnt{JPatCtx}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \Omega  ;  \Gamma ;  \Delta   \vDash   \ottnt{p}  :_ \ottmv{F}   \ottnt{B}  \Rightarrow  \ottnt{A} }{}{}{}{\ottcom{Contexts generated by a pattern (variables bound by the pattern)}}}

\newcommand{\ottJRename}{
\ottrulehead{\ottnt{JRename}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{rename} \  \ottnt{p}  \rightarrow  \ottnt{a}  \ \mathsf{to} \  \ottnt{p'}  \rightarrow  \ottnt{a'}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \Delta' }{}{}{}{\ottcom{rename with fresh variables}}}

\newcommand{\ottJMatchSubst}{
\ottrulehead{\ottnt{JMatchSubst}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{match} \  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{with} \  \ottnt{p}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b_{{\mathrm{2}}}} }{}{}{}{\ottcom{match and substitute}}}

\newcommand{\ottJIsPattern}{
\ottrulehead{\ottnt{JIsPattern}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{pattern} \, \ottnt{p}}{}{}{}{}}

\newcommand{\ottJSubPat}{
\ottrulehead{\ottnt{JSubPat}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{subpattern} \, \ottnt{p'} \, \ottnt{p}}{}{}{}{\ottcom{Subpattern}}}

\newcommand{\ottJTmPatternAgree}{
\ottrulehead{\ottnt{JTmPatternAgree}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{a}   \leftrightarrow   \ottnt{p} }{}{}{}{\ottcom{term and pattern agree}}}

\newcommand{\ottJTmSubPatternAgree}{
\ottrulehead{\ottnt{JTmSubPatternAgree}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{a}  \sqsubseteq  \ottnt{p} }{}{}{}{\ottcom{sub-pattern agrees with term}}}

\newcommand{\ottJSubTmPatternAgree}{
\ottrulehead{\ottnt{JSubTmPatternAgree}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{a}  \sqsupseteq  \ottnt{p} }{}{}{}{\ottcom{sub-term agrees with pattern}}}

\newcommand{\ottJValuePath}{
\ottrulehead{\ottnt{JValuePath}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{ValidPath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{}{}{}{\ottcom{Path headed by valid constructor}}}

\newcommand{\ottJCasePath}{
\ottrulehead{\ottnt{JCasePath}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{}{}{}{\ottcom{Path that is a value}}}

\newcommand{\ottJApplyArgs}{
\ottrulehead{\ottnt{JApplyArgs}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{apply~args} \  \ottnt{a}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b'} }{}{}{}{\ottcom{apply arguments of a (headed by a constant) to b}}}

\newcommand{\ottJValue}{
\ottrulehead{\ottnt{JValue}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{A} }{}{}{}{\ottcom{values}}}

\newcommand{\ottJValueType}{
\ottrulehead{\ottnt{JValueType}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{A} }{}{}{}{\ottcom{Types with head forms (erased language)}}}

\newcommand{\ottJconsistent}{
\ottrulehead{\ottnt{Jconsistent}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}  \  \ottnt{b}  } }{}{}{}{\ottcom{Types do not differ in their heads}}}

\newcommand{\ottJroleing}{
\ottrulehead{\ottnt{Jroleing}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }{}{}{}{\ottcom{Roleing judgment}}}

\newcommand{\ottJChk}{
\ottrulehead{\ottnt{JChk}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) }{}{}{}{\ottcom{irrelevant argument check}}}

\newcommand{\ottJpar}{
\ottrulehead{\ottnt{Jpar}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{b} }{}{}{}{\ottcom{parallel reduction}}\ottprodnewline
\ottprodline{|}{ \Omega   \vDash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} }{}{}{}{\ottcom{multistep parallel reduction}}\ottprodnewline
\ottprodline{|}{ \Omega   \vDash   \ottnt{a}   \Leftrightarrow _ \ottnt{R}   \ottnt{b} }{}{}{}{\ottcom{parallel reduction to a common term}}}

\newcommand{\ottJbeta}{
\ottrulehead{\ottnt{Jbeta}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \vDash   \ottnt{a}  \rightarrow^{\beta}_{ \ottnt{R} }  \ottnt{b} }{}{}{}{\ottcom{primitive reductions}}\ottprodnewline
\ottprodline{|}{ \vDash   \ottnt{a}   \leadsto _{ \ottnt{R} }  \ottnt{b} }{}{}{}{\ottcom{single-step head reduction for implicit language}}\ottprodnewline
\ottprodline{|}{\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{b}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{multistep reduction}}}

\newcommand{\ottJBranchTyping}{
\ottrulehead{\ottnt{JBranchTyping}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \; \overline{\mu} : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{B}  \Rightarrow  \ottnt{C}  \ | \,  \ottnt{C'} }{}{}{}{\ottcom{Branch Typing (aligning the types of case)}}}

\newcommand{\ottJett}{
\ottrulehead{\ottnt{Jett}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vDash  \phi \, \ \mathsf{ok}}{}{}{}{\ottcom{Prop wellformedness}}\ottprodnewline
\ottprodline{|}{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}{}{}{}{\ottcom{typing}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{;}  \Delta  \vDash  \phi_{{\mathrm{1}}}  \equiv  \phi_{{\mathrm{2}}}}{}{}{}{\ottcom{prop equality}}\ottprodnewline
\ottprodline{|}{ \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }{}{}{}{\ottcom{definitional equality}}\ottprodnewline
\ottprodline{|}{\vDash  \Gamma}{}{}{}{\ottcom{context wellformedness}}}

\newcommand{\ottJsig}{
\ottrulehead{\ottnt{Jsig}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\vDash  \Sigma}{}{}{}{\ottcom{signature wellformedness}}}

\newcommand{\ottJhiding}{
\ottrulehead{\ottnt{Jhiding}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\overline{R}_{{\mathrm{1}}}  \Leftarrow  \overline{R}_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Sigma_{{\mathrm{1}}}  \Leftarrow  \Sigma_{{\mathrm{2}}}}{}{}{}{}}

\newcommand{\ottJSrc}{
\ottrulehead{\ottnt{JSrc}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{A}}{}{}{}{\ottcom{source typing}}\ottprodnewline
\ottprodline{|}{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}{}{}{}{\ottcom{source translation}}\ottprodnewline
\ottprodline{|}{\Gamma  \vDash_{\mathsf{src} }  \phi  \leadsto  \phi' \, \ \mathsf{ok}}{}{}{}{\ottcom{Prop wellformedness}}}

\newcommand{\ottJann}{
\ottrulehead{\ottnt{Jann}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vdash  \phi \, \ \mathsf{ok}}{}{}{}{\ottcom{prop wellformedness}}\ottprodnewline
\ottprodline{|}{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{typing}}\ottprodnewline
\ottprodline{|}{ \Gamma ; \Delta \vdash   \gamma  :  \phi_{{\mathrm{1}}}  \sim  \phi_{{\mathrm{2}}} }{}{}{}{\ottcom{coercion between props}}\ottprodnewline
\ottprodline{|}{ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} }{}{}{}{\ottcom{coercion between types}}\ottprodnewline
\ottprodline{|}{\vdash  \Gamma}{}{}{}{\ottcom{context wellformedness}}}

\newcommand{\ottJred}{
\ottrulehead{\ottnt{Jred}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vdash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{single-step, weak head reduction to
   values for annotated language}}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{JSubRole}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JRolePath}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JAppsPath}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JSat}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JPatCtx}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JRename}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JMatchSubst}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JIsPattern}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JSubPat}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JTmPatternAgree}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JTmSubPatternAgree}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JSubTmPatternAgree}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JValuePath}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JCasePath}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JApplyArgs}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JValue}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JValueType}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jconsistent}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jroleing}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JChk}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jpar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jbeta}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JBranchTyping}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jett}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jsig}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jhiding}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JSrc}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jann}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jred}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{tmvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{covar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{datacon}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{const}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{index}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{relflag}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{appflag}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{role}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{constraint}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{tm}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{brs}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{co}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\upsilon}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{\upsilon}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\theta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{role\_context}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{roles}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sig\_sort}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sort}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{context}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sig}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{available\_props}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Nat}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mu}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{\mu}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottrelflag\ottinterrule
\ottappflag\ottinterrule
\ottrole\ottinterrule
\ottconstraint\ottinterrule
\otttm\ottinterrule
\ottbrs\ottinterrule
\ottco\ottinterrule
\ottApp\ottinterrule
\ottApps\ottinterrule
\otttheta\ottinterrule
\ottroleXXcontext\ottinterrule
\ottroles\ottinterrule
\ottsigXXsort\ottinterrule
\ottsort\ottinterrule
\ottcontext\ottinterrule
\ottsig\ottinterrule
\ottavailableXXprops\ottinterrule
\ottNat\ottinterrule
\ottpatternXXarg\ottinterrule
\ottpatternXXargs\ottinterrule
\ottterminals\ottinterrule
\ottformula\ottinterrule
\ottJSubRole\ottinterrule
\ottJRolePath\ottinterrule
\ottJAppsPath\ottinterrule
\ottJSat\ottinterrule
\ottJPatCtx\ottinterrule
\ottJRename\ottinterrule
\ottJMatchSubst\ottinterrule
\ottJIsPattern\ottinterrule
\ottJSubPat\ottinterrule
\ottJTmPatternAgree\ottinterrule
\ottJTmSubPatternAgree\ottinterrule
\ottJSubTmPatternAgree\ottinterrule
\ottJValuePath\ottinterrule
\ottJCasePath\ottinterrule
\ottJApplyArgs\ottinterrule
\ottJValue\ottinterrule
\ottJValueType\ottinterrule
\ottJconsistent\ottinterrule
\ottJroleing\ottinterrule
\ottJChk\ottinterrule
\ottJpar\ottinterrule
\ottJbeta\ottinterrule
\ottJBranchTyping\ottinterrule
\ottJett\ottinterrule
\ottJsig\ottinterrule
\ottJhiding\ottinterrule
\ottJSrc\ottinterrule
\ottJann\ottinterrule
\ottJred\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns JSubRole
%% defn SubRole
\newcommand{\ottdruleNomBot}[1]{\ottdrule[#1]{%
}{
 \ottkw{Nom}  \leq  \ottnt{R} }{%
{\ottdrulename{NomBot}}{}%
}}


\newcommand{\ottdruleRepTop}[1]{\ottdrule[#1]{%
}{
 \ottnt{R}  \leq  \ottkw{Rep} }{%
{\ottdrulename{RepTop}}{}%
}}


\newcommand{\ottdruleRefl}[1]{\ottdrule[#1]{%
}{
 \ottnt{R}  \leq  \ottnt{R} }{%
{\ottdrulename{Refl}}{}%
}}


\newcommand{\ottdruleTrans}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }%
\ottpremise{ \ottnt{R_{{\mathrm{2}}}}  \leq  \ottnt{R_{{\mathrm{3}}}} }%
}{
 \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{3}}}} }{%
{\ottdrulename{Trans}}{}%
}}

\newcommand{\ottdefnSubRole}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} $}{\ottcom{Subroling judgement}}
\ottusedrule{\ottdruleNomBot{}}
\ottusedrule{\ottdruleRepTop{}}
\ottusedrule{\ottdruleRefl{}}
\ottusedrule{\ottdruleTrans{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSubRole}{
\ottdefnSubRole{}}

% defns JRolePath
%% defn RolePath
\newcommand{\ottdruleRolePathXXAbsConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \mathsf{RolePath} \  \ottmv{F}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }{%
{\ottdrulename{RolePath\_AbsConst}}{}%
}}


\newcommand{\ottdruleRolePathXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \mathsf{RolePath} \  \ottmv{F}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }{%
{\ottdrulename{RolePath\_Const}}{}%
}}


\newcommand{\ottdruleRolePathXXTApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{RolePath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \ottnt{R_{{\mathrm{1}}}}  \ottsym{,}  \overline{R} }%
}{
 \mathsf{RolePath} \  \ottsym{(}   \ottnt{a} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }{%
{\ottdrulename{RolePath\_TApp}}{}%
}}


\newcommand{\ottdruleRolePathXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{RolePath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }%
}{
 \mathsf{RolePath} \  \ottsym{(}   \ottnt{a} \  \ottnt{b'} ^{ \ottsym{+} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }{%
{\ottdrulename{RolePath\_App}}{}%
}}


\newcommand{\ottdruleRolePathXXIApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{RolePath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }%
}{
 \mathsf{RolePath} \  \ottsym{(}   \ottnt{a} \  \Box ^{ \ottsym{-} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }{%
{\ottdrulename{RolePath\_IApp}}{}%
}}


\newcommand{\ottdruleRolePathXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{RolePath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }%
}{
 \mathsf{RolePath} \  \ottsym{(}   \ottnt{a} \; \bullet   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} }{%
{\ottdrulename{RolePath\_CApp}}{}%
}}

\newcommand{\ottdefnRolePath}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{RolePath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \overline{R} $}{\ottcom{Type headed by constant (partial function)}}
\ottusedrule{\ottdruleRolePathXXAbsConst{}}
\ottusedrule{\ottdruleRolePathXXConst{}}
\ottusedrule{\ottdruleRolePathXXTApp{}}
\ottusedrule{\ottdruleRolePathXXApp{}}
\ottusedrule{\ottdruleRolePathXXIApp{}}
\ottusedrule{\ottdruleRolePathXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJRolePath}{
\ottdefnRolePath{}}

% defns JAppsPath
%% defn AppsPath
\newcommand{\ottdruleAppsPathXXAbsConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \mathsf{AppsPath}\; \ottmv{F}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \;    }{%
{\ottdrulename{AppsPath\_AbsConst}}{}%
}}


\newcommand{\ottdruleAppsPathXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \neg  \ottsym{(}   \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R}   \ottsym{)} }%
}{
 \mathsf{AppsPath}\; \ottmv{F}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \;    }{%
{\ottdrulename{AppsPath\_Const}}{}%
}}


\newcommand{\ottdruleAppsPathXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{AppsPath}\; \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon} }%
}{
 \mathsf{AppsPath}\; \ottsym{(}   \ottnt{a} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \ottsym{(}   \overline{\upsilon} \;  \ottnt{R_{{\mathrm{1}}}}    \ottsym{)} }{%
{\ottdrulename{AppsPath\_App}}{}%
}}


\newcommand{\ottdruleAppsPathXXIApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{AppsPath}\; \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon} }%
}{
 \mathsf{AppsPath}\; \ottsym{(}   \ottnt{a} \  \ottnt{b} ^{ \ottsym{-} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \ottsym{(}   \overline{\upsilon} \;  \ottsym{-}    \ottsym{)} }{%
{\ottdrulename{AppsPath\_IApp}}{}%
}}


\newcommand{\ottdruleAppsPathXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{AppsPath}\; \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon} }%
}{
 \mathsf{AppsPath}\; \ottsym{(}   \ottnt{a} \; \bullet   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \ottsym{(}   \overline{\upsilon} \;  \bullet    \ottsym{)} }{%
{\ottdrulename{AppsPath\_CApp}}{}%
}}

\newcommand{\ottdefnAppsPath}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{AppsPath}\; \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon} $}{\ottcom{Type headed by constant (partial function)}}
\ottusedrule{\ottdruleAppsPathXXAbsConst{}}
\ottusedrule{\ottdruleAppsPathXXConst{}}
\ottusedrule{\ottdruleAppsPathXXApp{}}
\ottusedrule{\ottdruleAppsPathXXIApp{}}
\ottusedrule{\ottdruleAppsPathXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJAppsPath}{
\ottdefnAppsPath{}}

% defns JSat
%% defn AppRoles
\newcommand{\ottdruleARXXnil}[1]{\ottdrule[#1]{%
}{
    \leftrightarrow   \cdot }{%
{\ottdrulename{AR\_nil}}{}%
}}


\newcommand{\ottdruleARXXconsTApp}[1]{\ottdrule[#1]{%
\ottpremise{\overline{\upsilon}  \leftrightarrow  \overline{R}}%
}{
  \ottnt{R_{{\mathrm{1}}}}  \; \overline{\upsilon}   \leftrightarrow  \ottnt{R_{{\mathrm{1}}}}  \ottsym{,}  \overline{R}}{%
{\ottdrulename{AR\_consTApp}}{}%
}}


\newcommand{\ottdruleARXXconsApp}[1]{\ottdrule[#1]{%
\ottpremise{\overline{\upsilon}  \leftrightarrow  \overline{R}}%
}{
  \ottsym{+}  \; \overline{\upsilon}   \leftrightarrow  \overline{R}}{%
{\ottdrulename{AR\_consApp}}{}%
}}


\newcommand{\ottdruleARXXconsIApp}[1]{\ottdrule[#1]{%
\ottpremise{\overline{\upsilon}  \leftrightarrow  \overline{R}}%
}{
  \ottsym{-}  \; \overline{\upsilon}   \leftrightarrow  \overline{R}}{%
{\ottdrulename{AR\_consIApp}}{}%
}}


\newcommand{\ottdruleARXXconsCApp}[1]{\ottdrule[#1]{%
\ottpremise{\overline{\upsilon}  \leftrightarrow  \overline{R}}%
}{
  \bullet  \; \overline{\upsilon}   \leftrightarrow  \overline{R}}{%
{\ottdrulename{AR\_consCApp}}{}%
}}

\newcommand{\ottdefnAppRoles}[1]{\begin{ottdefnblock}[#1]{$\overline{\upsilon}  \leftrightarrow  \overline{R}$}{}
\ottusedrule{\ottdruleARXXnil{}}
\ottusedrule{\ottdruleARXXconsTApp{}}
\ottusedrule{\ottdruleARXXconsApp{}}
\ottusedrule{\ottdruleARXXconsIApp{}}
\ottusedrule{\ottdruleARXXconsCApp{}}
\end{ottdefnblock}}

%% defn SatApp
\newcommand{\ottdruleSatXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{\overline{\upsilon}  \leftrightarrow  \overline{R}}%
}{
\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}}{%
{\ottdrulename{Sat\_Const}}{}%
}}


\newcommand{\ottdruleSatXXAxiom}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{0}}}}  :  \ottnt{A_{{\mathrm{1}}}} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \neg  \ottsym{(}   \ottnt{R_{{\mathrm{1}}}}  \leq  \ottkw{Nom}   \ottsym{)} }%
\ottpremise{\overline{\upsilon}  \leftrightarrow  \overline{R}}%
}{
\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}}{%
{\ottdrulename{Sat\_Axiom}}{}%
}}

\newcommand{\ottdefnSatApp}[1]{\begin{ottdefnblock}[#1]{$\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}$}{}
\ottusedrule{\ottdruleSatXXConst{}}
\ottusedrule{\ottdruleSatXXAxiom{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSat}{
\ottdefnAppRoles{}\ottdefnSatApp{}}

% defns JPatCtx
%% defn PatternContexts
\newcommand{\ottdrulePatCtxXXConst}[1]{\ottdrule[#1]{%
}{
 \varnothing  ;  \varnothing ;   \varnothing    \vDash   \ottmv{F}  :_ \ottmv{F}   \ottnt{A}  \Rightarrow  \ottnt{A} }{%
{\ottdrulename{PatCtx\_Const}}{}%
}}


\newcommand{\ottdrulePatCtxXXPiRel}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  ;  \Gamma ;  \Delta   \vDash   \ottnt{p}  :_ \ottmv{F}    \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A'} \to \ottnt{A}   \Rightarrow  \ottnt{B} }%
}{
 \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{R}  ;  \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A'} ;  \Delta   \vDash    \ottnt{p} \  \ottmv{x} ^{ \ottnt{R} }   :_ \ottmv{F}   \ottnt{A}  \Rightarrow  \ottnt{B} }{%
{\ottdrulename{PatCtx\_PiRel}}{}%
}}


\newcommand{\ottdrulePatCtxXXPiIrr}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  ;  \Gamma ;  \Delta   \vDash   \ottnt{p}  :_ \ottmv{F}    \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A'} \to \ottnt{A}   \Rightarrow  \ottnt{B} }%
}{
 \Omega  ;  \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A'} ;  \Delta  \ottsym{,}  \ottmv{x}   \vDash    \ottnt{p} \  \Box ^{ \ottsym{-} }   :_ \ottmv{F}   \ottnt{A}  \Rightarrow  \ottnt{B} }{%
{\ottdrulename{PatCtx\_PiIrr}}{}%
}}


\newcommand{\ottdrulePatCtxXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  ;  \Gamma ;  \Delta   \vDash   \ottnt{p}  :_ \ottmv{F}    \forall \ottmv{c} \!:\! \phi . \ottnt{A}   \Rightarrow  \ottnt{B} }%
}{
 \Omega  ;  \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi ;  \Delta   \vDash    \ottnt{p} \; \bullet   :_ \ottmv{F}   \ottnt{A}  \Rightarrow  \ottnt{B} }{%
{\ottdrulename{PatCtx\_CPi}}{}%
}}

\newcommand{\ottdefnPatternContexts}[1]{\begin{ottdefnblock}[#1]{$ \Omega  ;  \Gamma ;  \Delta   \vDash   \ottnt{p}  :_ \ottmv{F}   \ottnt{B}  \Rightarrow  \ottnt{A} $}{\ottcom{Contexts generated by a pattern (variables bound by the pattern)}}
\ottusedrule{\ottdrulePatCtxXXConst{}}
\ottusedrule{\ottdrulePatCtxXXPiRel{}}
\ottusedrule{\ottdrulePatCtxXXPiIrr{}}
\ottusedrule{\ottdrulePatCtxXXCPi{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJPatCtx}{
\ottdefnPatternContexts{}}

% defns JRename
%% defn Rename
\newcommand{\ottdruleRenameXXBase}[1]{\ottdrule[#1]{%
}{
 \mathsf{rename} \  \ottmv{F}  \rightarrow  \ottnt{a}  \ \mathsf{to} \  \ottmv{F}  \rightarrow  \ottnt{a}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \   \varnothing  }{%
{\ottdrulename{Rename\_Base}}{}%
}}


\newcommand{\ottdruleRenameXXAppRel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{rename} \  \ottnt{p_{{\mathrm{1}}}}  \rightarrow  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{to} \  \ottnt{p_{{\mathrm{2}}}}  \rightarrow  \ottnt{a_{{\mathrm{2}}}}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \Delta' }%
\ottpremise{\ottmv{y} \, \not\in \, \ottsym{(}   \Delta ,  \Delta'   \ottsym{)}}%
}{
 \mathsf{rename} \  \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \  \ottmv{x} ^{ \ottnt{R} }   \ottsym{)}  \rightarrow  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{to} \  \ottsym{(}   \ottnt{p_{{\mathrm{2}}}} \  \ottmv{y} ^{ \ottnt{R} }   \ottsym{)}  \rightarrow  \ottsym{(}   \ottnt{a_{{\mathrm{2}}}}  \lbrace  \ottmv{y}   \ottsym{/}   \ottmv{x}   \rbrace   \ottsym{)}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \ottsym{(}  \Delta'  \ottsym{,}  \ottmv{y}  \ottsym{)} }{%
{\ottdrulename{Rename\_AppRel}}{}%
}}


\newcommand{\ottdruleRenameXXAppIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{rename} \  \ottnt{p_{{\mathrm{1}}}}  \rightarrow  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{to} \  \ottnt{p_{{\mathrm{2}}}}  \rightarrow  \ottnt{a_{{\mathrm{2}}}}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \Delta' }%
}{
 \mathsf{rename} \  \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \  \Box ^{ \ottsym{-} }   \ottsym{)}  \rightarrow  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{to} \  \ottsym{(}   \ottnt{p_{{\mathrm{2}}}} \  \Box ^{ \ottsym{-} }   \ottsym{)}  \rightarrow  \ottnt{a_{{\mathrm{2}}}}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \Delta' }{%
{\ottdrulename{Rename\_AppIrrel}}{}%
}}


\newcommand{\ottdruleRenameXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{rename} \  \ottnt{p_{{\mathrm{1}}}}  \rightarrow  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{to} \  \ottnt{p_{{\mathrm{2}}}}  \rightarrow  \ottnt{a_{{\mathrm{2}}}}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \Delta' }%
}{
 \mathsf{rename} \  \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \; \bullet   \ottsym{)}  \rightarrow  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{to} \  \ottsym{(}   \ottnt{p_{{\mathrm{2}}}} \; \bullet   \ottsym{)}  \rightarrow  \ottnt{a_{{\mathrm{2}}}}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \Delta' }{%
{\ottdrulename{Rename\_CApp}}{}%
}}

\newcommand{\ottdefnRename}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{rename} \  \ottnt{p}  \rightarrow  \ottnt{a}  \ \mathsf{to} \  \ottnt{p'}  \rightarrow  \ottnt{a'}  \ \mathsf{excluding} \  \Delta  \ \mathsf{and} \  \Delta' $}{\ottcom{rename with fresh variables}}
\ottusedrule{\ottdruleRenameXXBase{}}
\ottusedrule{\ottdruleRenameXXAppRel{}}
\ottusedrule{\ottdruleRenameXXAppIrrel{}}
\ottusedrule{\ottdruleRenameXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJRename}{
\ottdefnRename{}}

% defns JMatchSubst
%% defn MatchSubst
\newcommand{\ottdruleMatchSubstXXConst}[1]{\ottdrule[#1]{%
}{
 \mathsf{match} \  \ottmv{F}  \ \mathsf{with} \  \ottmv{F}  \rightarrow  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b} }{%
{\ottdrulename{MatchSubst\_Const}}{}%
}}


\newcommand{\ottdruleMatchSubstXXAppRelR}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{match} \  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{with} \  \ottnt{p_{{\mathrm{1}}}}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b_{{\mathrm{2}}}} }%
}{
 \mathsf{match} \  \ottsym{(}   \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a} ^{ \ottnt{R} }   \ottsym{)}  \ \mathsf{with} \  \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \  \ottmv{x} ^{ \ottnt{R} }   \ottsym{)}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottsym{(}   \ottnt{b_{{\mathrm{2}}}}  \lbrace  \ottnt{a}   \ottsym{/}   \ottmv{x}   \rbrace   \ottsym{)} }{%
{\ottdrulename{MatchSubst\_AppRelR}}{}%
}}


\newcommand{\ottdruleMatchSubstXXAppIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{match} \  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{with} \  \ottnt{p_{{\mathrm{1}}}}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b_{{\mathrm{2}}}} }%
}{
 \mathsf{match} \  \ottsym{(}   \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a} ^{ \ottsym{-} }   \ottsym{)}  \ \mathsf{with} \  \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \  \Box ^{ \ottsym{-} }   \ottsym{)}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b_{{\mathrm{2}}}} }{%
{\ottdrulename{MatchSubst\_AppIrrel}}{}%
}}


\newcommand{\ottdruleMatchSubstXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{match} \  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{with} \  \ottnt{a_{{\mathrm{2}}}}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b_{{\mathrm{2}}}} }%
}{
 \mathsf{match} \  \ottsym{(}   \ottnt{a_{{\mathrm{1}}}} \; \bullet   \ottsym{)}  \ \mathsf{with} \  \ottsym{(}   \ottnt{a_{{\mathrm{2}}}} \; \bullet   \ottsym{)}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b_{{\mathrm{2}}}} }{%
{\ottdrulename{MatchSubst\_CApp}}{}%
}}

\newcommand{\ottdefnMatchSubst}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{match} \  \ottnt{a_{{\mathrm{1}}}}  \ \mathsf{with} \  \ottnt{p}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b_{{\mathrm{2}}}} $}{\ottcom{match and substitute}}
\ottusedrule{\ottdruleMatchSubstXXConst{}}
\ottusedrule{\ottdruleMatchSubstXXAppRelR{}}
\ottusedrule{\ottdruleMatchSubstXXAppIrrel{}}
\ottusedrule{\ottdruleMatchSubstXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJMatchSubst}{
\ottdefnMatchSubst{}}

% defns JIsPattern
%% defn Pattern
\newcommand{\ottdrulePatternXXHead}[1]{\ottdrule[#1]{%
}{
\ottkw{pattern} \, \ottmv{F}}{%
{\ottdrulename{Pattern\_Head}}{}%
}}


\newcommand{\ottdrulePatternXXRel}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pattern} \, \ottnt{p}}%
}{
\ottkw{pattern} \, \ottsym{(}   \ottnt{p} \  \ottnt{a} ^{ \ottnt{R} }   \ottsym{)}}{%
{\ottdrulename{Pattern\_Rel}}{}%
}}


\newcommand{\ottdrulePatternXXIrrel}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pattern} \, \ottnt{p}}%
}{
\ottkw{pattern} \, \ottsym{(}   \ottnt{p} \  \ottnt{a} ^{ \ottsym{-} }   \ottsym{)}}{%
{\ottdrulename{Pattern\_Irrel}}{}%
}}


\newcommand{\ottdrulePatternXXCo}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pattern} \, \ottnt{p}}%
}{
\ottkw{pattern} \, \ottsym{(}   \ottnt{p} \; \gamma   \ottsym{)}}{%
{\ottdrulename{Pattern\_Co}}{}%
}}

\newcommand{\ottdefnPattern}[1]{\begin{ottdefnblock}[#1]{$\ottkw{pattern} \, \ottnt{p}$}{}
\ottusedrule{\ottdrulePatternXXHead{}}
\ottusedrule{\ottdrulePatternXXRel{}}
\ottusedrule{\ottdrulePatternXXIrrel{}}
\ottusedrule{\ottdrulePatternXXCo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJIsPattern}{
\ottdefnPattern{}}

% defns JSubPat
%% defn SubPat
\newcommand{\ottdruleSubPatXXRefl}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pattern} \, \ottnt{p}}%
}{
\ottkw{subpattern} \, \ottnt{p} \, \ottnt{p}}{%
{\ottdrulename{SubPat\_Refl}}{}%
}}


\newcommand{\ottdruleSubPatXXRel}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{subpattern} \, \ottnt{p'} \, \ottnt{p}}%
}{
\ottkw{subpattern} \, \ottnt{p'} \, \ottsym{(}   \ottnt{p} \  \ottmv{x} ^{ \ottnt{R} }   \ottsym{)}}{%
{\ottdrulename{SubPat\_Rel}}{}%
}}


\newcommand{\ottdruleSubPatXXIrrel}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{subpattern} \, \ottnt{p'} \, \ottnt{p}}%
}{
\ottkw{subpattern} \, \ottnt{p'} \, \ottsym{(}   \ottnt{p} \  \Box ^{ \ottsym{-} }   \ottsym{)}}{%
{\ottdrulename{SubPat\_Irrel}}{}%
}}


\newcommand{\ottdruleSubPatXXCo}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{subpattern} \, \ottnt{p'} \, \ottnt{p}}%
}{
\ottkw{subpattern} \, \ottnt{p'} \, \ottsym{(}   \ottnt{p} \; \bullet   \ottsym{)}}{%
{\ottdrulename{SubPat\_Co}}{}%
}}

\newcommand{\ottdefnSubPat}[1]{\begin{ottdefnblock}[#1]{$\ottkw{subpattern} \, \ottnt{p'} \, \ottnt{p}$}{\ottcom{Subpattern}}
\ottusedrule{\ottdruleSubPatXXRefl{}}
\ottusedrule{\ottdruleSubPatXXRel{}}
\ottusedrule{\ottdruleSubPatXXIrrel{}}
\ottusedrule{\ottdruleSubPatXXCo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSubPat}{
\ottdefnSubPat{}}

% defns JTmPatternAgree
%% defn tm_pattern_agree
\newcommand{\ottdruletmXXpatternXXagreeXXConst}[1]{\ottdrule[#1]{%
}{
 \ottmv{F}   \leftrightarrow   \ottmv{F} }{%
{\ottdrulename{tm\_pattern\_agree\_Const}}{}%
}}


\newcommand{\ottdruletmXXpatternXXagreeXXAppRelR}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a_{{\mathrm{1}}}}   \leftrightarrow   \ottnt{p_{{\mathrm{1}}}} }%
}{
 \ottsym{(}   \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a_{{\mathrm{2}}}} ^{ \ottnt{R} }   \ottsym{)}   \leftrightarrow   \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \  \ottmv{x} ^{ \ottnt{R} }   \ottsym{)} }{%
{\ottdrulename{tm\_pattern\_agree\_AppRelR}}{}%
}}


\newcommand{\ottdruletmXXpatternXXagreeXXAppIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a_{{\mathrm{1}}}}   \leftrightarrow   \ottnt{p_{{\mathrm{1}}}} }%
}{
 \ottsym{(}   \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a} ^{ \ottsym{-} }   \ottsym{)}   \leftrightarrow   \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \  \Box ^{ \ottsym{-} }   \ottsym{)} }{%
{\ottdrulename{tm\_pattern\_agree\_AppIrrel}}{}%
}}


\newcommand{\ottdruletmXXpatternXXagreeXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a_{{\mathrm{1}}}}   \leftrightarrow   \ottnt{p_{{\mathrm{1}}}} }%
}{
 \ottsym{(}   \ottnt{a_{{\mathrm{1}}}} \; \bullet   \ottsym{)}   \leftrightarrow   \ottsym{(}   \ottnt{p_{{\mathrm{1}}}} \; \bullet   \ottsym{)} }{%
{\ottdrulename{tm\_pattern\_agree\_CApp}}{}%
}}

\newcommand{\ottdefntmXXpatternXXagree}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{a}   \leftrightarrow   \ottnt{p} $}{\ottcom{term and pattern agree}}
\ottusedrule{\ottdruletmXXpatternXXagreeXXConst{}}
\ottusedrule{\ottdruletmXXpatternXXagreeXXAppRelR{}}
\ottusedrule{\ottdruletmXXpatternXXagreeXXAppIrrel{}}
\ottusedrule{\ottdruletmXXpatternXXagreeXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJTmPatternAgree}{
\ottdefntmXXpatternXXagree{}}

% defns JTmSubPatternAgree
%% defn tm_subpattern_agree
\newcommand{\ottdruletmXXsubpatternXXagreeXXBase}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a}   \leftrightarrow   \ottnt{p} }%
}{
 \ottnt{a}  \sqsubseteq  \ottnt{p} }{%
{\ottdrulename{tm\_subpattern\_agree\_Base}}{}%
}}


\newcommand{\ottdruletmXXsubpatternXXagreeXXAppRelR}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a}  \sqsubseteq  \ottnt{p} }%
}{
 \ottnt{a}  \sqsubseteq  \ottsym{(}   \ottnt{p} \  \ottmv{x} ^{ \ottnt{R} }   \ottsym{)} }{%
{\ottdrulename{tm\_subpattern\_agree\_AppRelR}}{}%
}}


\newcommand{\ottdruletmXXsubpatternXXagreeXXAppIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a}  \sqsubseteq  \ottnt{p} }%
}{
 \ottnt{a}  \sqsubseteq  \ottsym{(}   \ottnt{p} \  \Box ^{ \ottsym{-} }   \ottsym{)} }{%
{\ottdrulename{tm\_subpattern\_agree\_AppIrrel}}{}%
}}


\newcommand{\ottdruletmXXsubpatternXXagreeXXCAppp}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a}  \sqsubseteq  \ottnt{p} }%
}{
 \ottnt{a}  \sqsubseteq  \ottsym{(}   \ottnt{p} \; \bullet   \ottsym{)} }{%
{\ottdrulename{tm\_subpattern\_agree\_CAppp}}{}%
}}

\newcommand{\ottdefntmXXsubpatternXXagree}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{a}  \sqsubseteq  \ottnt{p} $}{\ottcom{sub-pattern agrees with term}}
\ottusedrule{\ottdruletmXXsubpatternXXagreeXXBase{}}
\ottusedrule{\ottdruletmXXsubpatternXXagreeXXAppRelR{}}
\ottusedrule{\ottdruletmXXsubpatternXXagreeXXAppIrrel{}}
\ottusedrule{\ottdruletmXXsubpatternXXagreeXXCAppp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJTmSubPatternAgree}{
\ottdefntmXXsubpatternXXagree{}}

% defns JSubTmPatternAgree
%% defn subtm_pattern_agree
\newcommand{\ottdrulesubtmXXpatternXXagreeXXBase}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a}   \leftrightarrow   \ottnt{p} }%
}{
 \ottnt{a}  \sqsupseteq  \ottnt{p} }{%
{\ottdrulename{subtm\_pattern\_agree\_Base}}{}%
}}


\newcommand{\ottdrulesubtmXXpatternXXagreeXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a}  \sqsupseteq  \ottnt{p} }%
}{
  \ottnt{a} \  \ottnt{a_{{\mathrm{2}}}} ^{ \nu }   \sqsupseteq  \ottnt{p} }{%
{\ottdrulename{subtm\_pattern\_agree\_App}}{}%
}}


\newcommand{\ottdrulesubtmXXpatternXXagreeXXCAppp}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{a}  \sqsupseteq  \ottnt{p} }%
}{
  \ottnt{a} \; \bullet   \sqsupseteq  \ottnt{p} }{%
{\ottdrulename{subtm\_pattern\_agree\_CAppp}}{}%
}}

\newcommand{\ottdefnsubtmXXpatternXXagree}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{a}  \sqsupseteq  \ottnt{p} $}{\ottcom{sub-term agrees with pattern}}
\ottusedrule{\ottdrulesubtmXXpatternXXagreeXXBase{}}
\ottusedrule{\ottdrulesubtmXXpatternXXagreeXXApp{}}
\ottusedrule{\ottdrulesubtmXXpatternXXagreeXXCAppp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSubTmPatternAgree}{
\ottdefnsubtmXXpatternXXagree{}}

% defns JValuePath
%% defn ValuePath
\newcommand{\ottdruleValuePathXXAbsConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \mathsf{ValidPath} \  \ottmv{F}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{%
{\ottdrulename{ValuePath\_AbsConst}}{}%
}}


\newcommand{\ottdruleValuePathXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \mathsf{ValidPath} \  \ottmv{F}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{%
{\ottdrulename{ValuePath\_Const}}{}%
}}


\newcommand{\ottdruleValuePathXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValidPath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
}{
 \mathsf{ValidPath} \  \ottsym{(}   \ottnt{a} \  \ottnt{b'} ^{ \nu }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{%
{\ottdrulename{ValuePath\_App}}{}%
}}


\newcommand{\ottdruleValuePathXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValidPath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
}{
 \mathsf{ValidPath} \  \ottsym{(}   \ottnt{a} \; \bullet   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{%
{\ottdrulename{ValuePath\_CApp}}{}%
}}

\newcommand{\ottdefnValuePath}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{ValidPath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} $}{\ottcom{Path headed by valid constructor}}
\ottusedrule{\ottdruleValuePathXXAbsConst{}}
\ottusedrule{\ottdruleValuePathXXConst{}}
\ottusedrule{\ottdruleValuePathXXApp{}}
\ottusedrule{\ottdruleValuePathXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJValuePath}{
\ottdefnValuePath{}}

% defns JCasePath
%% defn CasePath
\newcommand{\ottdruleCasePathXXAbsConst}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValidPath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{%
{\ottdrulename{CasePath\_AbsConst}}{}%
}}


\newcommand{\ottdruleCasePathXXConst}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValidPath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \neg  \ottsym{(}   \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R}   \ottsym{)} }%
}{
 \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{%
{\ottdrulename{CasePath\_Const}}{}%
}}


\newcommand{\ottdruleCasePathXXUnMatch}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValidPath} \  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \neg  \ottsym{(}   \ottnt{a}  \sqsupseteq  \ottnt{p}   \ottsym{)} }%
}{
 \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }{%
{\ottdrulename{CasePath\_UnMatch}}{}%
}}

\newcommand{\ottdefnCasePath}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} $}{\ottcom{Path that is a value}}
\ottusedrule{\ottdruleCasePathXXAbsConst{}}
\ottusedrule{\ottdruleCasePathXXConst{}}
\ottusedrule{\ottdruleCasePathXXUnMatch{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJCasePath}{
\ottdefnCasePath{}}

% defns JApplyArgs
%% defn ApplyArgs
\newcommand{\ottdruleApplyArgsXXConst}[1]{\ottdrule[#1]{%
}{
 \mathsf{apply~args} \  \ottmv{F}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b} }{%
{\ottdrulename{ApplyArgs\_Const}}{}%
}}


\newcommand{\ottdruleApplyArgsXXAppRole}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{apply~args} \  \ottnt{a}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b'} }%
}{
 \mathsf{apply~args} \  \ottsym{(}   \ottnt{a} \  \ottnt{a'} ^{ \ottnt{R} }   \ottsym{)}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottsym{(}   \ottnt{b'} \  \ottnt{a'} ^{ \ottsym{+} }   \ottsym{)} }{%
{\ottdrulename{ApplyArgs\_AppRole}}{}%
}}


\newcommand{\ottdruleApplyArgsXXAppRho}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{apply~args} \  \ottnt{a}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b'} }%
}{
 \mathsf{apply~args} \  \ottsym{(}   \ottnt{a} \  \ottnt{a'} ^{ \rho }   \ottsym{)}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottsym{(}   \ottnt{b'} \  \ottnt{a'} ^{ \rho }   \ottsym{)} }{%
{\ottdrulename{ApplyArgs\_AppRho}}{}%
}}


\newcommand{\ottdruleApplyArgsXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{apply~args} \  \ottnt{a}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b'} }%
}{
 \mathsf{apply~args} \   \ottnt{a} \; \bullet   \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}    \ottnt{b'} \; \bullet  }{%
{\ottdrulename{ApplyArgs\_CApp}}{}%
}}

\newcommand{\ottdefnApplyArgs}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{apply~args} \  \ottnt{a}  \ \mathsf{to} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b'} $}{\ottcom{apply arguments of a (headed by a constant) to b}}
\ottusedrule{\ottdruleApplyArgsXXConst{}}
\ottusedrule{\ottdruleApplyArgsXXAppRole{}}
\ottusedrule{\ottdruleApplyArgsXXAppRho{}}
\ottusedrule{\ottdruleApplyArgsXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJApplyArgs}{
\ottdefnApplyArgs{}}

% defns JValue
%% defn Value
\newcommand{\ottdruleValueXXStar}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \star  }{%
{\ottdrulename{Value\_Star}}{}%
}}


\newcommand{\ottdruleValueXXPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}  }{%
{\ottdrulename{Value\_Pi}}{}%
}}


\newcommand{\ottdruleValueXXCPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \forall \ottmv{c} \!:\! \phi . \ottnt{B}  }{%
{\ottdrulename{Value\_CPi}}{}%
}}


\newcommand{\ottdruleValueXXAbsRel}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\lambda}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} . \ottnt{a}  }{%
{\ottdrulename{Value\_AbsRel}}{}%
}}


\newcommand{\ottdruleValueXXUAbsRel}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\lambda}^{ \ottsym{+} } \ottmv{x} . \ottnt{a}  }{%
{\ottdrulename{Value\_UAbsRel}}{}%
}}


\newcommand{\ottdruleValueXXUAbsIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{a} }%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\lambda}^{ \ottsym{-} } \ottmv{x} . \ottnt{a}  }{%
{\ottdrulename{Value\_UAbsIrrel}}{}%
}}


\newcommand{\ottdruleValueXXCAbs}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\Lambda} \ottmv{c} \!:\! \phi . \ottnt{a}  }{%
{\ottdrulename{Value\_CAbs}}{}%
}}


\newcommand{\ottdruleValueXXUCAbs}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}  }{%
{\ottdrulename{Value\_UCAbs}}{}%
}}


\newcommand{\ottdruleValueXXPath}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
}{
 \mathsf{Value}_{ \ottnt{R} }\  \ottnt{a} }{%
{\ottdrulename{Value\_Path}}{}%
}}

\newcommand{\ottdefnValue}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{A} $}{\ottcom{values}}
\ottusedrule{\ottdruleValueXXStar{}}
\ottusedrule{\ottdruleValueXXPi{}}
\ottusedrule{\ottdruleValueXXCPi{}}
\ottusedrule{\ottdruleValueXXAbsRel{}}
\ottusedrule{\ottdruleValueXXUAbsRel{}}
\ottusedrule{\ottdruleValueXXUAbsIrrel{}}
\ottusedrule{\ottdruleValueXXCAbs{}}
\ottusedrule{\ottdruleValueXXUCAbs{}}
\ottusedrule{\ottdruleValueXXPath{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJValue}{
\ottdefnValue{}}

% defns JValueType
%% defn value_type
\newcommand{\ottdrulevalueXXtypeXXStar}[1]{\ottdrule[#1]{%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\   \star  }{%
{\ottdrulename{value\_type\_Star}}{}%
}}


\newcommand{\ottdrulevalueXXtypeXXPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}  }{%
{\ottdrulename{value\_type\_Pi}}{}%
}}


\newcommand{\ottdrulevalueXXtypeXXCPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\   \forall \ottmv{c} \!:\! \phi . \ottnt{B}  }{%
{\ottdrulename{value\_type\_CPi}}{}%
}}


\newcommand{\ottdrulevalueXXtypeXXValuePath}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{a} }{%
{\ottdrulename{value\_type\_ValuePath}}{}%
}}

\newcommand{\ottdefnvalueXXtype}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{A} $}{\ottcom{Types with head forms (erased language)}}
\ottusedrule{\ottdrulevalueXXtypeXXStar{}}
\ottusedrule{\ottdrulevalueXXtypeXXPi{}}
\ottusedrule{\ottdrulevalueXXtypeXXCPi{}}
\ottusedrule{\ottdrulevalueXXtypeXXValuePath{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJValueType}{
\ottdefnvalueXXtype{}}

% defns Jconsistent
%% defn consistent
\newcommand{\ottdruleconsistentXXaXXStar}[1]{\ottdrule[#1]{%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\   \star   \   \star   } }{%
{\ottdrulename{consistent\_a\_Star}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXPi}[1]{\ottdrule[#1]{%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R'} }\  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x_{{\mathrm{1}}}} \!:\! \ottnt{A_{{\mathrm{1}}}} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}  \  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x_{{\mathrm{2}}}} \!:\! \ottnt{A_{{\mathrm{2}}}} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{)}  } }{%
{\ottdrulename{consistent\_a\_Pi}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXCPi}[1]{\ottdrule[#1]{%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottsym{(}   \forall \ottmv{c_{{\mathrm{1}}}} \!:\! \phi_{{\mathrm{1}}} . \ottnt{A_{{\mathrm{1}}}}   \ottsym{)}  \  \ottsym{(}   \forall \ottmv{c_{{\mathrm{2}}}} \!:\! \phi_{{\mathrm{2}}} . \ottnt{A_{{\mathrm{2}}}}   \ottsym{)}  } }{%
{\ottdrulename{consistent\_a\_CPi}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXCasePath}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R} }\  \ottnt{a_{{\mathrm{2}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a_{{\mathrm{1}}}}  \  \ottnt{a_{{\mathrm{2}}}}  } }{%
{\ottdrulename{consistent\_a\_CasePath}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXStepXXR}[1]{\ottdrule[#1]{%
\ottpremise{ \neg   \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{b}  }%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}  \  \ottnt{b}  } }{%
{\ottdrulename{consistent\_a\_Step\_R}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXStepXXL}[1]{\ottdrule[#1]{%
\ottpremise{ \neg   \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{a}  }%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}  \  \ottnt{b}  } }{%
{\ottdrulename{consistent\_a\_Step\_L}}{}%
}}

\newcommand{\ottdefnconsistent}[1]{\begin{ottdefnblock}[#1]{$ \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}  \  \ottnt{b}  } $}{\ottcom{Types do not differ in their heads}}
\ottusedrule{\ottdruleconsistentXXaXXStar{}}
\ottusedrule{\ottdruleconsistentXXaXXPi{}}
\ottusedrule{\ottdruleconsistentXXaXXCPi{}}
\ottusedrule{\ottdruleconsistentXXaXXCasePath{}}
\ottusedrule{\ottdruleconsistentXXaXXStepXXR{}}
\ottusedrule{\ottdruleconsistentXXaXXStepXXL{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJconsistent}{
\ottdefnconsistent{}}

% defns Jroleing
%% defn roleing
\newcommand{\ottdruleroleXXaXXBullet}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
}{
 \Omega  \vDash  \Box  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_Bullet}}{}%
}}


\newcommand{\ottdruleroleXXaXXStar}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
}{
 \Omega  \vDash   \star   :  \ottnt{R} }{%
{\ottdrulename{role\_a\_Star}}{}%
}}


\newcommand{\ottdruleroleXXaXXVar}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{R} \, \in \, \Omega}%
\ottpremise{ \ottnt{R}  \leq  \ottnt{R_{{\mathrm{1}}}} }%
}{
 \Omega  \vDash  \ottmv{x}  :  \ottnt{R_{{\mathrm{1}}}} }{%
{\ottdrulename{role\_a\_Var}}{}%
}}


\newcommand{\ottdruleroleXXaXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottkw{Nom}  \vDash  \ottnt{a}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{a}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_Abs}}{}%
}}


\newcommand{\ottdruleroleXXaXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}  :  \ottkw{Nom} }%
}{
 \Omega  \vDash  \ottsym{(}   \ottnt{a} \  \ottnt{b} ^{ \rho }   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_App}}{}%
}}


\newcommand{\ottdruleroleXXaXXTApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}  :   \ottnt{R_{{\mathrm{1}}}} \wedge \ottnt{R}  }%
}{
 \Omega  \vDash   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} }   :  \ottnt{R} }{%
{\ottdrulename{role\_a\_TApp}}{}%
}}


\newcommand{\ottdruleroleXXaXXPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{A}  :  \ottnt{R} }%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottkw{Nom}  \vDash  \ottnt{B}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_Pi}}{}%
}}


\newcommand{\ottdruleroleXXaXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{A}  :  \ottkw{Rep} }%
\ottpremise{ \Omega  \vDash  \ottnt{B}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \forall \ottmv{c} \!:\!  \ottnt{a}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A}  . \ottnt{B}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_CPi}}{}%
}}


\newcommand{\ottdruleroleXXaXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{b}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{b}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_CAbs}}{}%
}}


\newcommand{\ottdruleroleXXaXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \ottnt{a} \; \bullet   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_CApp}}{}%
}}


\newcommand{\ottdruleroleXXaXXConst}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \Omega  \vDash  \ottmv{F}  :  \ottnt{R} }{%
{\ottdrulename{role\_a\_Const}}{}%
}}


\newcommand{\ottdruleroleXXaXXFam}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
 \Omega  \vDash  \ottmv{F}  :  \ottnt{R_{{\mathrm{1}}}} }{%
{\ottdrulename{role\_a\_Fam}}{}%
}}


\newcommand{\ottdruleroleXXaXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottkw{Nom} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{R_{{\mathrm{1}}}} }%
}{
 \Omega  \vDash   \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   :  \ottnt{R_{{\mathrm{1}}}} }{%
{\ottdrulename{role\_a\_Pattern}}{}%
}}

\newcommand{\ottdefnroleing}[1]{\begin{ottdefnblock}[#1]{$ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} $}{\ottcom{Roleing judgment}}
\ottusedrule{\ottdruleroleXXaXXBullet{}}
\ottusedrule{\ottdruleroleXXaXXStar{}}
\ottusedrule{\ottdruleroleXXaXXVar{}}
\ottusedrule{\ottdruleroleXXaXXAbs{}}
\ottusedrule{\ottdruleroleXXaXXApp{}}
\ottusedrule{\ottdruleroleXXaXXTApp{}}
\ottusedrule{\ottdruleroleXXaXXPi{}}
\ottusedrule{\ottdruleroleXXaXXCPi{}}
\ottusedrule{\ottdruleroleXXaXXCAbs{}}
\ottusedrule{\ottdruleroleXXaXXCApp{}}
\ottusedrule{\ottdruleroleXXaXXConst{}}
\ottusedrule{\ottdruleroleXXaXXFam{}}
\ottusedrule{\ottdruleroleXXaXXPattern{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJroleing}{
\ottdefnroleing{}}

% defns JChk
%% defn RhoCheck
\newcommand{\ottdruleRhoXXRel}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
 ( \ottsym{+}  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) }{%
{\ottdrulename{Rho\_Rel}}{}%
}}


\newcommand{\ottdruleRhoXXIrrRel}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{x} \, \not\in \, \mathsf{fv}\! \, \ottnt{A}}%
}{
 ( \ottsym{-}  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) }{%
{\ottdrulename{Rho\_IrrRel}}{}%
}}

\newcommand{\ottdefnRhoCheck}[1]{\begin{ottdefnblock}[#1]{$ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) $}{\ottcom{irrelevant argument check}}
\ottusedrule{\ottdruleRhoXXRel{}}
\ottusedrule{\ottdruleRhoXXIrrRel{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJChk}{
\ottdefnRhoCheck{}}

% defns Jpar
%% defn Par
\newcommand{\ottdruleParXXRefl}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a} }{%
{\ottdrulename{Par\_Refl}}{}%
}}


\newcommand{\ottdruleParXXBeta}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottsym{(}   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{a'}   \ottsym{)} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}   \Rightarrow _{ \ottkw{Nom} }  \ottnt{b'} }%
}{
 \Omega  \vDash   \ottnt{a} \  \ottnt{b} ^{ \rho }    \Rightarrow _{ \ottnt{R} }  \ottnt{a'}  \lbrace  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \rbrace }{%
{\ottdrulename{Par\_Beta}}{}%
}}


\newcommand{\ottdruleParXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}   \Rightarrow _{ \ottsym{(}  \ottkw{app\_role} \, \nu \, \ottnt{R}  \ottsym{)} }  \ottnt{b'} }%
}{
 \Omega  \vDash   \ottnt{a} \  \ottnt{b} ^{ \nu }    \Rightarrow _{ \ottnt{R} }   \ottnt{a'} \  \ottnt{b'} ^{ \nu }  }{%
{\ottdrulename{Par\_App}}{}%
}}


\newcommand{\ottdruleParXXCBeta}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{a'}   \ottsym{)} }%
}{
 \Omega  \vDash   \ottnt{a} \; \bullet    \Rightarrow _{ \ottnt{R} }  \ottnt{a'}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace }{%
{\ottdrulename{Par\_CBeta}}{}%
}}


\newcommand{\ottdruleParXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
}{
 \Omega  \vDash   \ottnt{a} \; \bullet    \Rightarrow _{ \ottnt{R} }   \ottnt{a'} \; \bullet  }{%
{\ottdrulename{Par\_CApp}}{}%
}}


\newcommand{\ottdruleParXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottkw{Nom}  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
}{
 \Omega  \vDash   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{a}    \Rightarrow _{ \ottnt{R} }   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{a'}  }{%
{\ottdrulename{Par\_Abs}}{}%
}}


\newcommand{\ottdruleParXXPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{A}   \Rightarrow _{ \ottnt{R} }  \ottnt{A'} }%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottkw{Nom}  \vDash  \ottnt{B}   \Rightarrow _{ \ottnt{R} }  \ottnt{B'} }%
}{
 \Omega  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}    \Rightarrow _{ \ottnt{R} }   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A'} \to \ottnt{B'}  }{%
{\ottdrulename{Par\_Pi}}{}%
}}


\newcommand{\ottdruleParXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
}{
 \Omega  \vDash   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}    \Rightarrow _{ \ottnt{R} }   \mathrm{\Lambda} \ottmv{c} . \ottnt{a'}  }{%
{\ottdrulename{Par\_CAbs}}{}%
}}


\newcommand{\ottdruleParXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{A}   \Rightarrow _{ \ottkw{Rep} }  \ottnt{A'} }%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'} }%
\ottpremise{ \Omega  \vDash  \ottnt{B}   \Rightarrow _{ \ottnt{R} }  \ottnt{B'} }%
}{
 \Omega  \vDash   \forall \ottmv{c} \!:\!  \ottnt{a}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A}  . \ottnt{B}    \Rightarrow _{ \ottnt{R} }   \forall \ottmv{c} \!:\!  \ottnt{a'}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'}  :  \ottnt{A'}  . \ottnt{B'}  }{%
{\ottdrulename{Par\_CPi}}{}%
}}


\newcommand{\ottdruleParXXAxiomBase}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottmv{F}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R} }%
\ottpremise{ \emph{uniq}( \Omega ) }%
}{
 \Omega  \vDash  \ottmv{F}   \Rightarrow _{ \ottnt{R} }  \ottnt{b} }{%
{\ottdrulename{Par\_AxiomBase}}{}%
}}


\newcommand{\ottdruleParXXAxiomApp}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{  \ottnt{a}  \sqsubseteq  \ottnt{p}   \wedge   \neg  \ottsym{(}   \ottnt{a}   \leftrightarrow   \ottnt{p}   \ottsym{)}  }%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{a_{{\mathrm{1}}}}   \Rightarrow _{ \ottsym{(}  \ottkw{app\_role} \, \nu \, \ottnt{R}  \ottsym{)} }  \ottnt{a'_{{\mathrm{1}}}} }%
\ottpremise{ \mathsf{rename} \  \ottnt{p}  \rightarrow  \ottnt{b}  \ \mathsf{to} \  \ottnt{p'}  \rightarrow  \ottnt{b'}  \ \mathsf{excluding} \  \ottsym{(}    \widetilde { \Omega }  ,  \mathsf{fv}\! \, \ottnt{p}   \ottsym{)}  \ \mathsf{and} \  \Delta' }%
\ottpremise{ \mathsf{match} \  \ottsym{(}   \ottnt{a'} \  \ottnt{a'_{{\mathrm{1}}}} ^{ \nu }   \ottsym{)}  \ \mathsf{with} \  \ottnt{p'}  \rightarrow  \ottnt{b'}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{a_{{\mathrm{2}}}} }%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R} }%
}{
 \Omega  \vDash   \ottnt{a} \  \ottnt{a_{{\mathrm{1}}}} ^{ \nu }    \Rightarrow _{ \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}} }{%
{\ottdrulename{Par\_AxiomApp}}{}%
}}


\newcommand{\ottdruleParXXAxiomCApp}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{  \ottnt{a}  \sqsubseteq  \ottnt{p}   \wedge   \neg  \ottsym{(}   \ottnt{a}   \leftrightarrow   \ottnt{p}   \ottsym{)}  }%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
\ottpremise{ \mathsf{rename} \  \ottnt{p}  \rightarrow  \ottnt{b}  \ \mathsf{to} \  \ottnt{p'}  \rightarrow  \ottnt{b'}  \ \mathsf{excluding} \  \ottsym{(}    \widetilde { \Omega }  ,  \mathsf{fv}\! \, \ottnt{p}   \ottsym{)}  \ \mathsf{and} \  \Delta' }%
\ottpremise{ \mathsf{match} \  \ottsym{(}   \ottnt{a'} \; \bullet   \ottsym{)}  \ \mathsf{with} \  \ottnt{p'}  \rightarrow  \ottnt{b'}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{a_{{\mathrm{2}}}} }%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R} }%
}{
 \Omega  \vDash   \ottnt{a} \; \bullet    \Rightarrow _{ \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}} }{%
{\ottdrulename{Par\_AxiomCApp}}{}%
}}


\newcommand{\ottdruleParXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottkw{Nom} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \ottsym{)}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottsym{(}   \mathsf{case} \hspace{3pt}  \ottnt{a'}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b'_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b'_{{\mathrm{2}}}}   \ottsym{)} }{%
{\ottdrulename{Par\_Pattern}}{}%
}}


\newcommand{\ottdruleParXXPatternTrue}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottkw{Nom} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }%
\ottpremise{ \mathsf{AppsPath}\; \ottnt{a'}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon} }%
\ottpremise{ \mathsf{apply~args} \  \ottnt{a'}  \ \mathsf{to} \  \ottnt{b'_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b} }%
\ottpremise{\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}'}%
}{
 \Omega  \vDash  \ottsym{(}   \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \ottsym{)}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }   \ottnt{b} \; \bullet  }{%
{\ottdrulename{Par\_PatternTrue}}{}%
}}


\newcommand{\ottdruleParXXPatternFalse}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottkw{Nom} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }%
\ottpremise{ \mathsf{Value}_{ \ottkw{Nom} }\  \ottnt{a'} }%
\ottpremise{ \neg  \ottsym{(}   \mathsf{AppsPath}\; \ottnt{a'}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon}   \ottsym{)} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \ottsym{)}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }{%
{\ottdrulename{Par\_PatternFalse}}{}%
}}

\newcommand{\ottdefnPar}[1]{\begin{ottdefnblock}[#1]{$ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{b} $}{\ottcom{parallel reduction}}
\ottusedrule{\ottdruleParXXRefl{}}
\ottusedrule{\ottdruleParXXBeta{}}
\ottusedrule{\ottdruleParXXApp{}}
\ottusedrule{\ottdruleParXXCBeta{}}
\ottusedrule{\ottdruleParXXCApp{}}
\ottusedrule{\ottdruleParXXAbs{}}
\ottusedrule{\ottdruleParXXPi{}}
\ottusedrule{\ottdruleParXXCAbs{}}
\ottusedrule{\ottdruleParXXCPi{}}
\ottusedrule{\ottdruleParXXAxiomBase{}}
\ottusedrule{\ottdruleParXXAxiomApp{}}
\ottusedrule{\ottdruleParXXAxiomCApp{}}
\ottusedrule{\ottdruleParXXPattern{}}
\ottusedrule{\ottdruleParXXPatternTrue{}}
\ottusedrule{\ottdruleParXXPatternFalse{}}
\end{ottdefnblock}}

%% defn MultiPar
\newcommand{\ottdruleMPXXRefl}[1]{\ottdrule[#1]{%
}{
 \Omega   \vDash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{a} }{%
{\ottdrulename{MP\_Refl}}{}%
}}


\newcommand{\ottdruleMPXXStep}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{b} }%
\ottpremise{ \Omega   \vDash   \ottnt{b}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{a'} }%
}{
 \Omega   \vDash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{a'} }{%
{\ottdrulename{MP\_Step}}{}%
}}

\newcommand{\ottdefnMultiPar}[1]{\begin{ottdefnblock}[#1]{$ \Omega   \vDash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} $}{\ottcom{multistep parallel reduction}}
\ottusedrule{\ottdruleMPXXRefl{}}
\ottusedrule{\ottdruleMPXXStep{}}
\end{ottdefnblock}}

%% defn joins
\newcommand{\ottdrulejoin}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega   \vDash   \ottnt{a_{{\mathrm{1}}}}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} }%
\ottpremise{ \Omega   \vDash   \ottnt{a_{{\mathrm{2}}}}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} }%
}{
 \Omega   \vDash   \ottnt{a_{{\mathrm{1}}}}   \Leftrightarrow _ \ottnt{R}   \ottnt{a_{{\mathrm{2}}}} }{%
{\ottdrulename{join}}{}%
}}

\newcommand{\ottdefnjoins}[1]{\begin{ottdefnblock}[#1]{$ \Omega   \vDash   \ottnt{a}   \Leftrightarrow _ \ottnt{R}   \ottnt{b} $}{\ottcom{parallel reduction to a common term}}
\ottusedrule{\ottdrulejoin{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJpar}{
\ottdefnPar{}\ottdefnMultiPar{}\ottdefnjoins{}}

% defns Jbeta
%% defn Beta
\newcommand{\ottdruleBetaXXAppAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R_{{\mathrm{1}}}} }\  \ottsym{(}   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{v}   \ottsym{)} }%
}{
 \vDash    \ottsym{(}   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{v}   \ottsym{)} \  \ottnt{b} ^{ \rho }   \rightarrow^{\beta}_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{v}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace }{%
{\ottdrulename{Beta\_AppAbs}}{}%
}}


\newcommand{\ottdruleBetaXXCAppCAbs}[1]{\ottdrule[#1]{%
}{
 \vDash    \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{a'}   \ottsym{)} \; \bullet   \rightarrow^{\beta}_{ \ottnt{R} }  \ottnt{a'}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace }{%
{\ottdrulename{Beta\_CAppCAbs}}{}%
}}


\newcommand{\ottdruleBetaXXAxiom}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \mathsf{rename} \  \ottnt{p}  \rightarrow  \ottnt{b}  \ \mathsf{to} \  \ottnt{p_{{\mathrm{1}}}}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \ \mathsf{excluding} \  \ottsym{(}   \mathsf{fv}\! \, \ottnt{a} ,  \mathsf{fv}\! \, \ottnt{p}   \ottsym{)}  \ \mathsf{and} \  \Delta' }%
\ottpremise{ \mathsf{match} \  \ottnt{a}  \ \mathsf{with} \  \ottnt{p_{{\mathrm{1}}}}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b'} }%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R} }%
}{
 \vDash   \ottnt{a}  \rightarrow^{\beta}_{ \ottnt{R} }  \ottnt{b'} }{%
{\ottdrulename{Beta\_Axiom}}{}%
}}


\newcommand{\ottdruleBetaXXPatternTrue}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{AppsPath}\; \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon} }%
\ottpremise{ \mathsf{apply~args} \  \ottnt{a}  \ \mathsf{to} \  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottnt{b'_{{\mathrm{1}}}} }%
\ottpremise{\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}'}%
}{
 \vDash    \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \rightarrow^{\beta}_{ \ottnt{R_{{\mathrm{0}}}} }   \ottnt{b'_{{\mathrm{1}}}} \; \bullet  }{%
{\ottdrulename{Beta\_PatternTrue}}{}%
}}


\newcommand{\ottdruleBetaXXPatternFalse}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottkw{Nom} }\  \ottnt{a} }%
\ottpremise{ \neg  \ottsym{(}   \mathsf{AppsPath}\; \ottnt{a}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} \; \overline{\upsilon}   \ottsym{)} }%
}{
 \vDash    \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \rightarrow^{\beta}_{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b_{{\mathrm{2}}}} }{%
{\ottdrulename{Beta\_PatternFalse}}{}%
}}

\newcommand{\ottdefnBeta}[1]{\begin{ottdefnblock}[#1]{$ \vDash   \ottnt{a}  \rightarrow^{\beta}_{ \ottnt{R} }  \ottnt{b} $}{\ottcom{primitive reductions}}
\ottusedrule{\ottdruleBetaXXAppAbs{}}
\ottusedrule{\ottdruleBetaXXCAppCAbs{}}
\ottusedrule{\ottdruleBetaXXAxiom{}}
\ottusedrule{\ottdruleBetaXXPatternTrue{}}
\ottusedrule{\ottdruleBetaXXPatternFalse{}}
\end{ottdefnblock}}

%% defn reduction_in_one
\newcommand{\ottdruleEXXAbsTerm}[1]{\ottdrule[#1]{%
\ottpremise{ \vDash   \ottnt{a}   \leadsto _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a'} }%
}{
 \vDash    \mathrm{\lambda}^{ \ottsym{-} } \ottmv{x} . \ottnt{a}    \leadsto _{ \ottnt{R_{{\mathrm{1}}}} }   \mathrm{\lambda}^{ \ottsym{-} } \ottmv{x} . \ottnt{a'}  }{%
{\ottdrulename{E\_AbsTerm}}{}%
}}


\newcommand{\ottdruleEXXAppLeft}[1]{\ottdrule[#1]{%
\ottpremise{ \vDash   \ottnt{a}   \leadsto _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a'} }%
}{
 \vDash    \ottnt{a} \  \ottnt{b} ^{ \nu }    \leadsto _{ \ottnt{R_{{\mathrm{1}}}} }   \ottnt{a'} \  \ottnt{b} ^{ \nu }  }{%
{\ottdrulename{E\_AppLeft}}{}%
}}


\newcommand{\ottdruleEXXCAppLeft}[1]{\ottdrule[#1]{%
\ottpremise{ \vDash   \ottnt{a}   \leadsto _{ \ottnt{R} }  \ottnt{a'} }%
}{
 \vDash    \ottnt{a} \; \bullet    \leadsto _{ \ottnt{R} }   \ottnt{a'} \; \bullet  }{%
{\ottdrulename{E\_CAppLeft}}{}%
}}


\newcommand{\ottdruleEXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{ \vDash   \ottnt{a}   \leadsto _{ \ottkw{Nom} }  \ottnt{a'} }%
}{
 \vDash    \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}    \leadsto _{ \ottnt{R_{{\mathrm{0}}}} }   \mathsf{case} \hspace{3pt}  \ottnt{a'}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}  }{%
{\ottdrulename{E\_Pattern}}{}%
}}


\newcommand{\ottdruleEXXPrim}[1]{\ottdrule[#1]{%
\ottpremise{ \vDash   \ottnt{a}  \rightarrow^{\beta}_{ \ottnt{R} }  \ottnt{b} }%
}{
 \vDash   \ottnt{a}   \leadsto _{ \ottnt{R} }  \ottnt{b} }{%
{\ottdrulename{E\_Prim}}{}%
}}

\newcommand{\ottdefnreductionXXinXXone}[1]{\begin{ottdefnblock}[#1]{$ \vDash   \ottnt{a}   \leadsto _{ \ottnt{R} }  \ottnt{b} $}{\ottcom{single-step head reduction for implicit language}}
\ottusedrule{\ottdruleEXXAbsTerm{}}
\ottusedrule{\ottdruleEXXAppLeft{}}
\ottusedrule{\ottdruleEXXCAppLeft{}}
\ottusedrule{\ottdruleEXXPattern{}}
\ottusedrule{\ottdruleEXXPrim{}}
\end{ottdefnblock}}

%% defn reduction
\newcommand{\ottdruleEqual}[1]{\ottdrule[#1]{%
}{
\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{a}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{Equal}}{}%
}}


\newcommand{\ottdruleStep}[1]{\ottdrule[#1]{%
\ottpremise{ \vDash   \ottnt{a}   \leadsto _{ \ottnt{R} }  \ottnt{b} }%
\ottpremise{\vDash  \ottnt{b}  \leadsto^{\ast}  \ottnt{a'}  \ottsym{/}  \ottnt{R}}%
}{
\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{a'}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{Step}}{}%
}}

\newcommand{\ottdefnreduction}[1]{\begin{ottdefnblock}[#1]{$\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{b}  \ottsym{/}  \ottnt{R}$}{\ottcom{multistep reduction}}
\ottusedrule{\ottdruleEqual{}}
\ottusedrule{\ottdruleStep{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJbeta}{
\ottdefnBeta{}\ottdefnreductionXXinXXone{}\ottdefnreduction{}}

% defns JBranchTyping
%% defn BranchTyping
\newcommand{\ottdruleBranchTypingXXBase}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq} \  \Gamma }%
\ottpremise{\ottnt{C_{{\mathrm{1}}}}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace  \ottsym{=}  \ottnt{C_{{\mathrm{2}}}}}%
}{
 \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \; \overline{\mu} : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{    } :  \ottnt{A}  \Rightarrow   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a}   \sim _{ \ottkw{Nom} }   \ottnt{b} \; \overline{\mu}   :  \ottnt{A}   \ottsym{)} . \ottnt{C_{{\mathrm{1}}}}   \ | \,  \ottnt{C_{{\mathrm{2}}}} }{%
{\ottdrulename{BranchTyping\_Base}}{}%
}}


\newcommand{\ottdruleBranchTypingXXPiRole}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \;  \overline{\mu} \;  \ottmv{x} ^{ \ottnt{R} }   : \ottnt{A_{{\mathrm{1}}}} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{B}  \Rightarrow  \ottnt{C}  \ | \,  \ottnt{C'} }%
}{
 \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \; \overline{\mu} : \ottnt{A_{{\mathrm{1}}}} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \ottsym{(}    \ottnt{R}  \; \overline{\upsilon}   \ottsym{)} } :   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \Rightarrow   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{C}   \ | \,  \ottnt{C'} }{%
{\ottdrulename{BranchTyping\_PiRole}}{}%
}}


\newcommand{\ottdruleBranchTypingXXPiRel}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \;  \overline{\mu} \;  \ottmv{x} ^{ \ottsym{+} }   : \ottnt{A_{{\mathrm{1}}}} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{B}  \Rightarrow  \ottnt{C}  \ | \,  \ottnt{C'} }%
}{
 \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \; \overline{\mu} : \ottnt{A_{{\mathrm{1}}}} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \ottsym{(}    \ottsym{+}  \; \overline{\upsilon}   \ottsym{)} } :   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \Rightarrow   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{C}   \ | \,  \ottnt{C'} }{%
{\ottdrulename{BranchTyping\_PiRel}}{}%
}}


\newcommand{\ottdruleBranchTypingXXPiIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \;  \overline{\mu} \;  \Box ^{ \ottsym{-} }   : \ottnt{A_{{\mathrm{1}}}} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{B}  \Rightarrow  \ottnt{C}  \ | \,  \ottnt{C'} }%
}{
 \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \; \overline{\mu} : \ottnt{A_{{\mathrm{1}}}} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \ottsym{(}    \ottsym{-}  \; \overline{\upsilon}   \ottsym{)} } :   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \Rightarrow   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{C}   \ | \,  \ottnt{C'} }{%
{\ottdrulename{BranchTyping\_PiIrrel}}{}%
}}


\newcommand{\ottdruleBranchTypingXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \;  \overline{\mu} \;  \bullet   : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{B}  \Rightarrow  \ottnt{C}  \ | \,  \ottnt{C'} }%
}{
 \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \; \overline{\mu} : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \ottsym{(}    \bullet  \; \overline{\upsilon}   \ottsym{)} } :   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \Rightarrow   \forall \ottmv{c} \!:\! \phi . \ottnt{C}   \ | \,  \ottnt{C'} }{%
{\ottdrulename{BranchTyping\_CPi}}{}%
}}

\newcommand{\ottdefnBranchTyping}[1]{\begin{ottdefnblock}[#1]{$ \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottnt{b} \; \overline{\mu} : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{B}  \Rightarrow  \ottnt{C}  \ | \,  \ottnt{C'} $}{\ottcom{Branch Typing (aligning the types of case)}}
\ottusedrule{\ottdruleBranchTypingXXBase{}}
\ottusedrule{\ottdruleBranchTypingXXPiRole{}}
\ottusedrule{\ottdruleBranchTypingXXPiRel{}}
\ottusedrule{\ottdruleBranchTypingXXPiIrrel{}}
\ottusedrule{\ottdruleBranchTypingXXCPi{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJBranchTyping}{
\ottdefnBranchTyping{}}

% defns Jett
%% defn PropWff
\newcommand{\ottdruleEXXWff}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star  } }%
}{
\Gamma  \vDash   \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A}  \, \ \mathsf{ok}}{%
{\ottdrulename{E\_Wff}}{}%
}}

\newcommand{\ottdefnPropWff}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vDash  \phi \, \ \mathsf{ok}$}{\ottcom{Prop wellformedness}}
\ottusedrule{\ottdruleEXXWff{}}
\end{ottdefnblock}}

%% defn Typing
\newcommand{\ottdruleEXXStar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
}{
\Gamma  \vDash   \star   \ottsym{:}   \star }{%
{\ottdrulename{E\_Star}}{}%
}}


\newcommand{\ottdruleEXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{A} \, \in \, \Gamma}%
}{
\Gamma  \vDash  \ottmv{x}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{E\_Var}}{}%
}}


\newcommand{\ottdruleEXXPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash  \ottnt{B}  \ottsym{:}   \star }%
\ottpremise{\Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star }%
}{
\Gamma  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{:}   \star }{%
{\ottdrulename{E\_Pi}}{}%
}}


\newcommand{\ottdruleEXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{B}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star  } }%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{a} ) }%
}{
\Gamma  \vDash   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{a}   \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}}{%
{\ottdrulename{E\_Abs}}{}%
}}


\newcommand{\ottdruleEXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vDash   \ottnt{b} \  \ottnt{a} ^{ \ottsym{+} }   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{E\_App}}{}%
}}


\newcommand{\ottdruleEXXTApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \mathsf{RolePath} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \ottnt{R}  \ottsym{,}  \overline{R} }%
}{
\Gamma  \vDash   \ottnt{b} \  \ottnt{a} ^{ \ottnt{R} }   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{E\_TApp}}{}%
}}


\newcommand{\ottdruleEXXIApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vDash   \ottnt{b} \  \Box ^{ \ottsym{-} }   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{E\_IApp}}{}%
}}


\newcommand{\ottdruleEXXConv}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{A}   \equiv _{ \ottkw{Rep} }  \ottnt{B}  :   \star  }%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{B}  \ottsym{:}   \star  } }%
}{
\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{B}}{%
{\ottdrulename{E\_Conv}}{}%
}}


\newcommand{\ottdruleEXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vDash  \ottnt{B}  \ottsym{:}   \star }%
\ottpremise{ \suppress{ \Gamma  \vDash  \phi \, \ \mathsf{ok} } }%
}{
\Gamma  \vDash   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \ottsym{:}   \star }{%
{\ottdrulename{E\_CPi}}{}%
}}


\newcommand{\ottdruleEXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{B}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \phi \, \ \mathsf{ok} } }%
}{
\Gamma  \vDash   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}   \ottsym{:}   \forall \ottmv{c} \!:\! \phi . \ottnt{B} }{%
{\ottdrulename{E\_CAbs}}{}%
}}


\newcommand{\ottdruleEXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}} }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }%
}{
\Gamma  \vDash   \ottnt{a_{{\mathrm{1}}}} \; \bullet   \ottsym{:}  \ottnt{B_{{\mathrm{1}}}}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace}{%
{\ottdrulename{E\_CApp}}{}%
}}


\newcommand{\ottdruleEXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \suppress{ \varnothing  \vDash  \ottnt{A}  \ottsym{:}   \star  } }%
}{
\Gamma  \vDash  \ottmv{F}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{E\_Const}}{}%
}}


\newcommand{\ottdruleEXXFam}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{p}  \sim_{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \suppress{ \varnothing  \vDash  \ottnt{A}  \ottsym{:}   \star  } }%
}{
\Gamma  \vDash  \ottmv{F}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{E\_Fam}}{}%
}}


\newcommand{\ottdruleEXXCase}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash  \ottnt{b_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B}}%
\ottpremise{\Gamma  \vDash  \ottnt{b_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{C}}%
\ottpremise{ \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottmv{F} \;    : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{A_{{\mathrm{1}}}}  \Rightarrow  \ottnt{B}  \ | \,  \ottnt{C} }%
\ottpremise{\Gamma  \vDash  \ottmv{F}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}}%
\ottpremise{\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}}%
}{
\Gamma  \vDash   \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \ottsym{:}  \ottnt{C}}{%
{\ottdrulename{E\_Case}}{}%
}}

\newcommand{\ottdefnTyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}$}{\ottcom{typing}}
\ottusedrule{\ottdruleEXXStar{}}
\ottusedrule{\ottdruleEXXVar{}}
\ottusedrule{\ottdruleEXXPi{}}
\ottusedrule{\ottdruleEXXAbs{}}
\ottusedrule{\ottdruleEXXApp{}}
\ottusedrule{\ottdruleEXXTApp{}}
\ottusedrule{\ottdruleEXXIApp{}}
\ottusedrule{\ottdruleEXXConv{}}
\ottusedrule{\ottdruleEXXCPi{}}
\ottusedrule{\ottdruleEXXCAbs{}}
\ottusedrule{\ottdruleEXXCApp{}}
\ottusedrule{\ottdruleEXXConst{}}
\ottusedrule{\ottdruleEXXFam{}}
\ottusedrule{\ottdruleEXXCase{}}
\end{ottdefnblock}}

%% defn Iso
\newcommand{\ottdruleEXXPropCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{A_{{\mathrm{1}}}}   \equiv _{ \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}  :  \ottnt{A} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{B_{{\mathrm{1}}}}   \equiv _{ \ottnt{R} }  \ottnt{B_{{\mathrm{2}}}}  :  \ottnt{A} }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{B_{{\mathrm{1}}}}  :  \ottnt{A}   \equiv   \ottnt{A_{{\mathrm{2}}}}   \sim _{ \ottnt{R} }  \ottnt{B_{{\mathrm{2}}}}  :  \ottnt{A} }{%
{\ottdrulename{E\_PropCong}}{}%
}}


\newcommand{\ottdruleEXXIsoConv}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{A}   \equiv _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{B}  :   \star  }%
\ottpremise{\Gamma  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}  :  \ottnt{A}  \, \ \mathsf{ok}}%
\ottpremise{\Gamma  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}  :  \ottnt{B}  \, \ \mathsf{ok}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}  :  \ottnt{A}   \equiv   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}  :  \ottnt{B} }{%
{\ottdrulename{E\_IsoConv}}{}%
}}


\newcommand{\ottdruleEXXCPiFst}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}}    \equiv _{ \ottnt{R'} }   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{b_{{\mathrm{1}}}}   \sim _{ \ottnt{R_{{\mathrm{2}}}} }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{B}   \ottsym{)} . \ottnt{B_{{\mathrm{2}}}}   :   \star  }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A}   \equiv   \ottnt{b_{{\mathrm{1}}}}   \sim _{ \ottnt{R_{{\mathrm{2}}}} }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{B} }{%
{\ottdrulename{E\_CPiFst}}{}%
}}

\newcommand{\ottdefnIso}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \ottsym{;}  \Delta  \vDash  \phi_{{\mathrm{1}}}  \equiv  \phi_{{\mathrm{2}}}$}{\ottcom{prop equality}}
\ottusedrule{\ottdruleEXXPropCong{}}
\ottusedrule{\ottdruleEXXIsoConv{}}
\ottusedrule{\ottdruleEXXCPiFst{}}
\end{ottdefnblock}}

%% defn DefEq
\newcommand{\ottdruleEXXAssn}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{c}  \ottsym{:}  \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A}   \ottsym{)} \, \in \, \Gamma}%
\ottpremise{\ottmv{c} \, \in \, \Delta}%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }{%
{\ottdrulename{E\_Assn}}{}%
}}


\newcommand{\ottdruleEXXRefl}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} }{%
{\ottdrulename{E\_Refl}}{}%
}}


\newcommand{\ottdruleEXXSym}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{b}   \equiv _{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }{%
{\ottdrulename{E\_Sym}}{}%
}}


\newcommand{\ottdruleEXXTrans}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{a_{{\mathrm{1}}}}  :  \ottnt{A} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }{%
{\ottdrulename{E\_Trans}}{}%
}}


\newcommand{\ottdruleEXXSub}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A} }%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R_{{\mathrm{2}}}} }  \ottnt{b}  :  \ottnt{A} }{%
{\ottdrulename{E\_Sub}}{}%
}}


\newcommand{\ottdruleEXXBeta}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B} } }%
\ottpremise{ \vDash   \ottnt{a_{{\mathrm{1}}}}  \rightarrow^{\beta}_{ \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{B} }{%
{\ottdrulename{E\_Beta}}{}%
}}


\newcommand{\ottdruleEXXPiCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{A_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{A_{{\mathrm{2}}}}  :   \star  }%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  ;  \Delta   \vDash   \ottnt{B_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{B_{{\mathrm{2}}}}  :   \star  }%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A_{{\mathrm{1}}}}  \ottsym{:}   \star  } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{:}   \star  } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star  } }%
}{
 \Gamma  ;  \Delta   \vDash   \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}   \equiv _{ \ottnt{R'} }  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{)}  :   \star  }{%
{\ottdrulename{E\_PiCong}}{}%
}}


\newcommand{\ottdruleEXXAbsCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  ;  \Delta   \vDash   \ottnt{b_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{B} }%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A_{{\mathrm{1}}}}  \ottsym{:}   \star  } }%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{b_{{\mathrm{1}}}} ) }%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{b_{{\mathrm{2}}}} ) }%
}{
 \Gamma  ;  \Delta   \vDash   \ottsym{(}   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{b_{{\mathrm{1}}}}   \ottsym{)}   \equiv _{ \ottnt{R'} }  \ottsym{(}   \mathrm{\lambda}^{ \rho } \ottmv{x} . \ottnt{b_{{\mathrm{2}}}}   \ottsym{)}  :  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{)} }{%
{\ottdrulename{E\_AbsCong}}{}%
}}


\newcommand{\ottdruleEXXAppCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottsym{(}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{2}}}}   \equiv _{ \ottkw{Nom} }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{A} }%
}{
 \Gamma  ;  \Delta   \vDash    \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a_{{\mathrm{2}}}} ^{ \ottsym{+} }    \equiv _{ \ottnt{R'} }   \ottnt{b_{{\mathrm{1}}}} \  \ottnt{b_{{\mathrm{2}}}} ^{ \ottsym{+} }   :  \ottsym{(}  \ottnt{B}  \lbrace  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottmv{x}  \rbrace  \ottsym{)} }{%
{\ottdrulename{E\_AppCong}}{}%
}}


\newcommand{\ottdruleEXXTAppCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottsym{(}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{2}}}}   \equiv _{  \ottnt{R} \wedge \ottnt{R'}  }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{A} }%
\ottpremise{ \mathsf{RolePath} \  \ottnt{a_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \ottnt{R}  \ottsym{,}  \overline{R} }%
\ottpremise{ \mathsf{RolePath} \  \ottnt{b_{{\mathrm{1}}}}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \ottnt{R}  \ottsym{,}  \overline{R} }%
\ottpremise{\Gamma  \vDash   \ottnt{b_{{\mathrm{1}}}} \  \ottnt{b_{{\mathrm{2}}}} ^{ \ottnt{R} }   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottmv{x}  \rbrace}%
}{
 \Gamma  ;  \Delta   \vDash    \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a_{{\mathrm{2}}}} ^{ \ottnt{R} }    \equiv _{ \ottnt{R'} }   \ottnt{b_{{\mathrm{1}}}} \  \ottnt{b_{{\mathrm{2}}}} ^{ \ottnt{R} }   :  \ottsym{(}  \ottnt{B}  \lbrace  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottmv{x}  \rbrace  \ottsym{)} }{%
{\ottdrulename{E\_TAppCong}}{}%
}}


\newcommand{\ottdruleEXXIAppCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottsym{(}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
}{
 \Gamma  ;  \Delta   \vDash    \ottnt{a_{{\mathrm{1}}}} \  \Box ^{ \ottsym{-} }    \equiv _{ \ottnt{R'} }   \ottnt{b_{{\mathrm{1}}}} \  \Box ^{ \ottsym{-} }   :  \ottsym{(}  \ottnt{B}  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace  \ottsym{)} }{%
{\ottdrulename{E\_IAppCong}}{}%
}}


\newcommand{\ottdruleEXXPiFst}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} \to \ottnt{B_{{\mathrm{1}}}}    \equiv _{ \ottnt{R'} }   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} \to \ottnt{B_{{\mathrm{2}}}}   :   \star  }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{A_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{A_{{\mathrm{2}}}}  :   \star  }{%
{\ottdrulename{E\_PiFst}}{}%
}}


\newcommand{\ottdruleEXXPiSnd}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} \to \ottnt{B_{{\mathrm{1}}}}    \equiv _{ \ottnt{R'} }   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} \to \ottnt{B_{{\mathrm{2}}}}   :   \star  }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottkw{Nom} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A_{{\mathrm{1}}}} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{B_{{\mathrm{1}}}}  \lbrace  \ottnt{a_{{\mathrm{1}}}}  \ottsym{/}  \ottmv{x}  \rbrace   \equiv _{ \ottnt{R'} }  \ottnt{B_{{\mathrm{2}}}}  \lbrace  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottmv{x}  \rbrace  :   \star  }{%
{\ottdrulename{E\_PiSnd}}{}%
}}


\newcommand{\ottdruleEXXCPiCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottnt{A_{{\mathrm{1}}}}   \equiv   \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{A_{{\mathrm{2}}}} }%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottnt{A_{{\mathrm{1}}}}   ;  \Delta   \vDash   \ottnt{A}   \equiv _{ \ottnt{R'} }  \ottnt{B}  :   \star  }%
\ottpremise{ \suppress{ \Gamma  \vDash   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottnt{A_{{\mathrm{1}}}}  \, \ \mathsf{ok} } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottnt{A_{{\mathrm{1}}}}  . \ottnt{A}   \ottsym{:}   \star  } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{A_{{\mathrm{2}}}}  . \ottnt{B}   \ottsym{:}   \star  } }%
}{
 \Gamma  ;  \Delta   \vDash    \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottnt{A_{{\mathrm{1}}}}  . \ottnt{A}    \equiv _{ \ottnt{R'} }   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{A_{{\mathrm{2}}}}  . \ottnt{B}   :   \star  }{%
{\ottdrulename{E\_CPiCong}}{}%
}}


\newcommand{\ottdruleEXXCAbsCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi_{{\mathrm{1}}}  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{B} }%
\ottpremise{ \suppress{ \Gamma  \vDash  \phi_{{\mathrm{1}}} \, \ \mathsf{ok} } }%
}{
 \Gamma  ;  \Delta   \vDash   \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}   \ottsym{)}   \equiv _{ \ottnt{R} }  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{b}   \ottsym{)}  :   \forall \ottmv{c} \!:\! \phi_{{\mathrm{1}}} . \ottnt{B}  }{%
{\ottdrulename{E\_CAbsCong}}{}%
}}


\newcommand{\ottdruleEXXCAppCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{b_{{\mathrm{1}}}}  :  \ottsym{(}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A}   \ottsym{)} . \ottnt{B}   \ottsym{)} }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }%
}{
 \Gamma  ;  \Delta   \vDash    \ottnt{a_{{\mathrm{1}}}} \; \bullet    \equiv _{ \ottnt{R'} }   \ottnt{b_{{\mathrm{1}}}} \; \bullet   :  \ottsym{(}  \ottnt{B}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace  \ottsym{)} }{%
{\ottdrulename{E\_CAppCong}}{}%
}}


\newcommand{\ottdruleEXXCPiSnd}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}}    \equiv _{ \ottnt{R_{{\mathrm{0}}}} }   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a'_{{\mathrm{1}}}}   \sim _{ \ottnt{R'} }  \ottnt{a'_{{\mathrm{2}}}}  :  \ottnt{A'}   \ottsym{)} . \ottnt{B_{{\mathrm{2}}}}   :   \star  }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{ \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A} }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{a'_{{\mathrm{1}}}}   \equiv _{ \ottnt{R'} }  \ottnt{a'_{{\mathrm{2}}}}  :  \ottnt{A'} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{B_{{\mathrm{1}}}}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace   \equiv _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{B_{{\mathrm{2}}}}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace  :   \star  }{%
{\ottdrulename{E\_CPiSnd}}{}%
}}


\newcommand{\ottdruleEXXCast}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A}   \equiv   \ottnt{a'}   \sim _{ \ottnt{R'} }  \ottnt{b'}  :  \ottnt{A'} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a'}   \equiv _{ \ottnt{R'} }  \ottnt{b'}  :  \ottnt{A'} }{%
{\ottdrulename{E\_Cast}}{}%
}}


\newcommand{\ottdruleEXXEqConv}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{A}   \equiv _{ \ottkw{Rep} }  \ottnt{B}  :   \star  }%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{B}  \ottsym{:}   \star  } }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{B} }{%
{\ottdrulename{E\_EqConv}}{}%
}}


\newcommand{\ottdruleEXXIsoSnd}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  :  \ottnt{A}   \equiv   \ottnt{a'}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'}  :  \ottnt{A'} }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{A}   \equiv _{ \ottkw{Rep} }  \ottnt{A'}  :   \star  }{%
{\ottdrulename{E\_IsoSnd}}{}%
}}


\newcommand{\ottdruleEXXPatCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottkw{Nom} }  \ottnt{a'}  :  \ottnt{A} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{b_{{\mathrm{1}}}}   \equiv _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}}  :  \ottnt{B} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{b_{{\mathrm{2}}}}   \equiv _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}}  :  \ottnt{C} }%
\ottpremise{ \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a} \sim \ottmv{F} \;    : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{A_{{\mathrm{1}}}}  \Rightarrow  \ottnt{B}  \ | \,  \ottnt{C} }%
\ottpremise{ \Gamma  \vDash \mathsf{case} \hspace{2pt} ( \ottnt{a'} \sim \ottmv{F} \;    : \ottnt{A} ) \hspace{2pt} \mathsf{of} \hspace{2pt}  F\;{ \overline{\upsilon} } :  \ottnt{A_{{\mathrm{1}}}}  \Rightarrow  \ottnt{B'}  \ | \,  \ottnt{C} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash   \ottnt{B}   \equiv _{ \ottkw{Rep} }  \ottnt{B'}  :   \star  }%
\ottpremise{\ottkw{Sat} \, \ottmv{F} \, \overline{\upsilon}}%
\ottpremise{\Gamma  \vDash  \ottmv{F}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}}%
}{
 \Gamma  ;  \Delta   \vDash    \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}    \equiv _{ \ottnt{R_{{\mathrm{0}}}} }   \mathsf{case} \hspace{3pt}  \ottnt{a'}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b'_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b'_{{\mathrm{2}}}}   :  \ottnt{C} }{%
{\ottdrulename{E\_PatCong}}{}%
}}


\newcommand{\ottdruleEXXLeftRel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a'} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{b'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} }    \equiv _{ \ottnt{R'} }   \ottnt{a'} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} }   :  \ottnt{B}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{B}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace   \equiv _{ \ottkw{Rep} }  \ottnt{B}  \lbrace  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \rbrace  :   \star  }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R'} }  \ottnt{a'}  :   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}  }{%
{\ottdrulename{E\_LeftRel}}{}%
}}


\newcommand{\ottdruleEXXLeftIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a} \  \Box ^{ \ottsym{-} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a'} \  \Box ^{ \ottsym{-} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{b'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \ottnt{a} \  \Box ^{ \ottsym{-} }    \equiv _{ \ottnt{R'} }   \ottnt{a'} \  \Box ^{ \ottsym{-} }   :  \ottnt{B}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{B}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace   \equiv _{ \ottkw{Rep} }  \ottnt{B}  \lbrace  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \rbrace  :   \star  }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R'} }  \ottnt{a'}  :   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}  }{%
{\ottdrulename{E\_LeftIrrel}}{}%
}}


\newcommand{\ottdruleEXXRight}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a'} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} }   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{b'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} }    \equiv _{ \ottnt{R'} }   \ottnt{a'} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} }   :  \ottnt{B}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{B}  \lbrace  \ottnt{b}  \ottsym{/}  \ottmv{x}  \rbrace   \equiv _{ \ottkw{Rep} }  \ottnt{B}  \lbrace  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \rbrace  :   \star  }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{b}   \equiv _{  \ottnt{R_{{\mathrm{1}}}} \wedge \ottnt{R'}  }  \ottnt{b'}  :  \ottnt{A} }{%
{\ottdrulename{E\_Right}}{}%
}}


\newcommand{\ottdruleEXXCLeft}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a} \; \bullet   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{ \mathsf{ValuePath}_{ \ottnt{R'} }\  \ottsym{(}   \ottnt{a'} \; \bullet   \ottsym{)}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A}   \ottsym{)} . \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A}   \ottsym{)} . \ottnt{B} }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{a_{{\mathrm{1}}}}   \equiv _{  \ottnt{R_{{\mathrm{1}}}} \wedge \ottnt{R'}  }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A} }%
\ottpremise{ \Gamma  ;  \Delta   \vDash    \ottnt{a} \; \bullet    \equiv _{ \ottnt{R'} }   \ottnt{a'} \; \bullet   :  \ottnt{B}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace }%
}{
 \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R'} }  \ottnt{a'}  :   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}  :  \ottnt{A}   \ottsym{)} . \ottnt{B}  }{%
{\ottdrulename{E\_CLeft}}{}%
}}

\newcommand{\ottdefnDefEq}[1]{\begin{ottdefnblock}[#1]{$ \Gamma  ;  \Delta   \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} $}{\ottcom{definitional equality}}
\ottusedrule{\ottdruleEXXAssn{}}
\ottusedrule{\ottdruleEXXRefl{}}
\ottusedrule{\ottdruleEXXSym{}}
\ottusedrule{\ottdruleEXXTrans{}}
\ottusedrule{\ottdruleEXXSub{}}
\ottusedrule{\ottdruleEXXBeta{}}
\ottusedrule{\ottdruleEXXPiCong{}}
\ottusedrule{\ottdruleEXXAbsCong{}}
\ottusedrule{\ottdruleEXXAppCong{}}
\ottusedrule{\ottdruleEXXTAppCong{}}
\ottusedrule{\ottdruleEXXIAppCong{}}
\ottusedrule{\ottdruleEXXPiFst{}}
\ottusedrule{\ottdruleEXXPiSnd{}}
\ottusedrule{\ottdruleEXXCPiCong{}}
\ottusedrule{\ottdruleEXXCAbsCong{}}
\ottusedrule{\ottdruleEXXCAppCong{}}
\ottusedrule{\ottdruleEXXCPiSnd{}}
\ottusedrule{\ottdruleEXXCast{}}
\ottusedrule{\ottdruleEXXEqConv{}}
\ottusedrule{\ottdruleEXXIsoSnd{}}
\ottusedrule{\ottdruleEXXPatCong{}}
\ottusedrule{\ottdruleEXXLeftRel{}}
\ottusedrule{\ottdruleEXXLeftIrrel{}}
\ottusedrule{\ottdruleEXXRight{}}
\ottusedrule{\ottdruleEXXCLeft{}}
\end{ottdefnblock}}

%% defn Ctx
\newcommand{\ottdruleEXXEmpty}[1]{\ottdrule[#1]{%
}{
\vDash  \varnothing}{%
{\ottdrulename{E\_Empty}}{}%
}}


\newcommand{\ottdruleEXXConsTm}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star }%
\ottpremise{\ottmv{x} \, \not\in \,  \widetilde { \Gamma } }%
}{
\vDash  \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{E\_ConsTm}}{}%
}}


\newcommand{\ottdruleEXXConsCo}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\Gamma  \vDash  \phi \, \ \mathsf{ok}}%
\ottpremise{\ottmv{c} \, \not\in \,  \widetilde { \Gamma } }%
}{
\vDash  \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi}{%
{\ottdrulename{E\_ConsCo}}{}%
}}

\newcommand{\ottdefnCtx}[1]{\begin{ottdefnblock}[#1]{$\vDash  \Gamma$}{\ottcom{context wellformedness}}
\ottusedrule{\ottdruleEXXEmpty{}}
\ottusedrule{\ottdruleEXXConsTm{}}
\ottusedrule{\ottdruleEXXConsCo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJett}{
\ottdefnPropWff{}\ottdefnTyping{}\ottdefnIso{}\ottdefnDefEq{}\ottdefnCtx{}}

% defns Jsig
%% defn Sig
\newcommand{\ottdruleSigXXEmpty}[1]{\ottdrule[#1]{%
}{
\vDash   \varnothing }{%
{\ottdrulename{Sig\_Empty}}{}%
}}


\newcommand{\ottdruleSigXXConsConst}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Sigma}%
\ottpremise{\varnothing  \vDash  \ottnt{A}  \ottsym{:}   \star }%
\ottpremise{\ottmv{F} \, \not\in \, \mathsf{dom} \, \Sigma}%
}{
\vDash   \Sigma  \cup \{ \ottmv{F}  :   \ottnt{A} \  \ottsym{@} \  \overline{R}  \} }{%
{\ottdrulename{Sig\_ConsConst}}{}%
}}


\newcommand{\ottdruleSigXXConsAx}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Sigma}%
\ottpremise{\ottmv{F} \, \not\in \, \mathsf{dom} \, \Sigma}%
\ottpremise{\varnothing  \vDash  \ottnt{A}  \ottsym{:}   \star }%
\ottpremise{ \Omega  ;  \Gamma ;  \Delta   \vDash   \ottnt{p}  :_ \ottmv{F}   \ottnt{B}  \Rightarrow  \ottnt{A} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{B}}%
\ottpremise{\Delta  \ottsym{\#}  \mathsf{fv}\! \, \ottnt{a}}%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
}{
\vDash   \Sigma  \cup \{ \ottmv{F}  :   \ottnt{p}  \sim_{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \ottkw{range} \, \Omega  \} }{%
{\ottdrulename{Sig\_ConsAx}}{}%
}}

\newcommand{\ottdefnSig}[1]{\begin{ottdefnblock}[#1]{$\vDash  \Sigma$}{\ottcom{signature wellformedness}}
\ottusedrule{\ottdruleSigXXEmpty{}}
\ottusedrule{\ottdruleSigXXConsConst{}}
\ottusedrule{\ottdruleSigXXConsAx{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJsig}{
\ottdefnSig{}}

% defns Jhiding
%% defn RoleWeaken
\newcommand{\ottdruleRXXNil}[1]{\ottdrule[#1]{%
}{
 \cdot   \Leftarrow   \cdot }{%
{\ottdrulename{R\_Nil}}{}%
}}


\newcommand{\ottdruleRXXCons}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{R_{{\mathrm{2}}}}  \leq  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{\overline{R}_{{\mathrm{1}}}  \Leftarrow  \overline{R}_{{\mathrm{2}}}}%
}{
\ottnt{R_{{\mathrm{1}}}}  \ottsym{,}  \overline{R}_{{\mathrm{1}}}  \Leftarrow  \ottnt{R_{{\mathrm{2}}}}  \ottsym{,}  \overline{R}_{{\mathrm{2}}}}{%
{\ottdrulename{R\_Cons}}{}%
}}

\newcommand{\ottdefnRoleWeaken}[1]{\begin{ottdefnblock}[#1]{$\overline{R}_{{\mathrm{1}}}  \Leftarrow  \overline{R}_{{\mathrm{2}}}$}{}
\ottusedrule{\ottdruleRXXNil{}}
\ottusedrule{\ottdruleRXXCons{}}
\end{ottdefnblock}}

%% defn SigWeaken
\newcommand{\ottdruleSXXForget}[1]{\ottdrule[#1]{%
\ottpremise{\Sigma_{{\mathrm{1}}}  \Leftarrow  \Sigma_{{\mathrm{2}}}}%
}{
\Sigma_{{\mathrm{1}}}  \Leftarrow   \Sigma_{{\mathrm{2}}}  \cup \{ \ottmv{F}  :  \ottnt{sig\_sort} \} }{%
{\ottdrulename{S\_Forget}}{}%
}}


\newcommand{\ottdruleSXXHide}[1]{\ottdrule[#1]{%
\ottpremise{\Sigma_{{\mathrm{1}}}  \Leftarrow  \Sigma_{{\mathrm{2}}}}%
\ottpremise{\overline{R}_{{\mathrm{1}}}  \Leftarrow  \overline{R}_{{\mathrm{2}}}}%
}{
 \Sigma_{{\mathrm{1}}}  \cup \{ \ottmv{F}  :   \ottnt{A} \  \ottsym{@} \  \overline{R}_{{\mathrm{1}}}  \}   \Leftarrow   \Sigma_{{\mathrm{2}}}  \cup \{ \ottmv{F}  :   \ottnt{p}  \sim_{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}_{{\mathrm{2}}}  \} }{%
{\ottdrulename{S\_Hide}}{}%
}}


\newcommand{\ottdruleSXXWeakenConst}[1]{\ottdrule[#1]{%
\ottpremise{\Sigma_{{\mathrm{1}}}  \Leftarrow  \Sigma_{{\mathrm{2}}}}%
\ottpremise{\overline{R}_{{\mathrm{1}}}  \Leftarrow  \overline{R}_{{\mathrm{2}}}}%
}{
 \Sigma_{{\mathrm{1}}}  \cup \{ \ottmv{F}  :   \ottnt{A} \  \ottsym{@} \  \overline{R}_{{\mathrm{1}}}  \}   \Leftarrow   \Sigma_{{\mathrm{2}}}  \cup \{ \ottmv{F}  :   \ottnt{A} \  \ottsym{@} \  \overline{R}_{{\mathrm{2}}}  \} }{%
{\ottdrulename{S\_WeakenConst}}{}%
}}


\newcommand{\ottdruleSXXWeakenAxiom}[1]{\ottdrule[#1]{%
\ottpremise{\Sigma_{{\mathrm{1}}}  \Leftarrow  \Sigma_{{\mathrm{2}}}}%
\ottpremise{\overline{R}_{{\mathrm{1}}}  \Leftarrow  \overline{R}_{{\mathrm{2}}}}%
}{
 \Sigma_{{\mathrm{1}}}  \cup \{ \ottmv{F}  :   \ottnt{p'}  \sim_{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}_{{\mathrm{1}}}  \}   \Leftarrow   \Sigma_{{\mathrm{2}}}  \cup \{ \ottmv{F}  :   \ottnt{p}  \sim_{ \ottnt{R} }  \ottnt{a}  :  \ottnt{A} \  \ottsym{@} \  \overline{R}_{{\mathrm{2}}}  \} }{%
{\ottdrulename{S\_WeakenAxiom}}{}%
}}


\newcommand{\ottdruleSXXEmpty}[1]{\ottdrule[#1]{%
}{
 \varnothing   \Leftarrow   \varnothing }{%
{\ottdrulename{S\_Empty}}{}%
}}


\newcommand{\ottdruleSXXSame}[1]{\ottdrule[#1]{%
\ottpremise{\Sigma_{{\mathrm{1}}}  \Leftarrow  \Sigma_{{\mathrm{2}}}}%
}{
 \Sigma_{{\mathrm{1}}}  \cup \{ \ottmv{F}  :  \ottnt{sig\_sort} \}   \Leftarrow   \Sigma_{{\mathrm{2}}}  \cup \{ \ottmv{F}  :  \ottnt{sig\_sort} \} }{%
{\ottdrulename{S\_Same}}{}%
}}

\newcommand{\ottdefnSigWeaken}[1]{\begin{ottdefnblock}[#1]{$\Sigma_{{\mathrm{1}}}  \Leftarrow  \Sigma_{{\mathrm{2}}}$}{}
\ottusedrule{\ottdruleSXXForget{}}
\ottusedrule{\ottdruleSXXHide{}}
\ottusedrule{\ottdruleSXXWeakenConst{}}
\ottusedrule{\ottdruleSXXWeakenAxiom{}}
\ottusedrule{\ottdruleSXXEmpty{}}
\ottusedrule{\ottdruleSXXSame{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJhiding}{
\ottdefnRoleWeaken{}\ottdefnSigWeaken{}}

% defns JSrc
%% defn SrcTyping
\newcommand{\ottdruleSXXStar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
}{
\Gamma  \vDash_{\mathsf{src} }   \star   \ottsym{:}   \star }{%
{\ottdrulename{S\_Star}}{}%
}}


\newcommand{\ottdruleSXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{A} \, \in \, \Gamma}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottmv{x}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{S\_Var}}{}%
}}


\newcommand{\ottdruleSXXPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{A}  \ottsym{:}   \star }%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{A}  \leadsto  \ottnt{A'}  \ottsym{:}   \star }%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A'}  \vDash_{\mathsf{src} }  \ottnt{B}  \ottsym{:}   \star }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}  \ottsym{:}   \star }{%
{\ottdrulename{S\_Pi}}{}%
}}


\newcommand{\ottdruleSXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vDash_{\mathsf{src} }   \lambda  \ottmv{x} . \ottnt{a}   \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}}{%
{\ottdrulename{S\_Abs}}{}%
}}


\newcommand{\ottdruleSXXIAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}}{%
{\ottdrulename{S\_IAbs}}{}%
}}


\newcommand{\ottdruleSXXConv}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{A}   \equiv _{ \ottkw{Nom} }  \ottnt{B}  :   \star  }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{B}}{%
{\ottdrulename{S\_Conv}}{}%
}}


\newcommand{\ottdruleSXXCoerce}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{A}   \equiv _{ \ottkw{Rep} }  \ottnt{B}  :   \star  }%
}{
\Gamma  \vDash_{\mathsf{src} }   \ottkw{coerce} \  \ottnt{a}   \ottsym{:}  \ottnt{B}}{%
{\ottdrulename{S\_Coerce}}{}%
}}


\newcommand{\ottdruleSXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vDash_{\mathsf{src} }   \ottnt{b} \  \ottnt{a}   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a'}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{S\_App}}{}%
}}


\newcommand{\ottdruleSXXIApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a'}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{S\_IApp}}{}%
}}


\newcommand{\ottdruleSXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \phi  \leadsto  \phi' \, \ \mathsf{ok}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi'  \vDash_{\mathsf{src} }  \ottnt{B}  \ottsym{:}   \star }%
}{
\Gamma  \vDash_{\mathsf{src} }   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \ottsym{:}   \star }{%
{\ottdrulename{S\_CPi}}{}%
}}


\newcommand{\ottdruleSXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi'  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}   \forall \ottmv{c} \!:\! \phi . \ottnt{B} }{%
{\ottdrulename{S\_CAbs}}{}%
}}


\newcommand{\ottdruleSXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}} }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B_{{\mathrm{1}}}}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace}{%
{\ottdrulename{S\_CApp}}{}%
}}


\newcommand{\ottdruleSXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottmv{F}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{S\_Const}}{}%
}}


\newcommand{\ottdruleSXXFam}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottmv{F}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{S\_Fam}}{}%
}}


\newcommand{\ottdruleSXXCase}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B}}%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b'_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{C}}%
}{
\Gamma  \vDash_{\mathsf{src} }   \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \ottsym{:}  \ottnt{C}}{%
{\ottdrulename{S\_Case}}{}%
}}

\newcommand{\ottdefnSrcTyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \ottsym{:}  \ottnt{A}$}{\ottcom{source typing}}
\ottusedrule{\ottdruleSXXStar{}}
\ottusedrule{\ottdruleSXXVar{}}
\ottusedrule{\ottdruleSXXPi{}}
\ottusedrule{\ottdruleSXXAbs{}}
\ottusedrule{\ottdruleSXXIAbs{}}
\ottusedrule{\ottdruleSXXConv{}}
\ottusedrule{\ottdruleSXXCoerce{}}
\ottusedrule{\ottdruleSXXApp{}}
\ottusedrule{\ottdruleSXXIApp{}}
\ottusedrule{\ottdruleSXXCPi{}}
\ottusedrule{\ottdruleSXXCAbs{}}
\ottusedrule{\ottdruleSXXCApp{}}
\ottusedrule{\ottdruleSXXConst{}}
\ottusedrule{\ottdruleSXXFam{}}
\ottusedrule{\ottdruleSXXCase{}}
\end{ottdefnblock}}

%% defn SrcTrans
\newcommand{\ottdruleSTXXStar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
}{
\Gamma  \vDash_{\mathsf{src} }   \star   \leadsto   \star   \ottsym{:}   \star }{%
{\ottdrulename{ST\_Star}}{}%
}}


\newcommand{\ottdruleSTXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{A} \, \in \, \Gamma}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottmv{x}  \leadsto  \ottmv{x}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{ST\_Var}}{}%
}}


\newcommand{\ottdruleSTXXPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{A}  \leadsto  \ottnt{A'}  \ottsym{:}   \star }%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A'}  \vDash_{\mathsf{src} }  \ottnt{B}  \leadsto  \ottnt{B'}  \ottsym{:}   \star }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}  \leadsto  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A'} \to \ottnt{B'}   \ottsym{)}  \ottsym{:}   \star }{%
{\ottdrulename{ST\_Pi}}{}%
}}


\newcommand{\ottdruleSTXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vDash_{\mathsf{src} }   \lambda  \ottmv{x} . \ottnt{a}   \leadsto   \mathrm{\lambda}^{ \ottsym{+} } \ottmv{x} . \ottnt{a'}   \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}}{%
{\ottdrulename{ST\_Abs}}{}%
}}


\newcommand{\ottdruleSTXXIAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{B}}%
\ottpremise{\ottmv{x} \, \not\in \, \mathsf{fv}\! \, \ottnt{a}}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto   \mathrm{\lambda}^{ \ottsym{-} } \ottmv{x} . \ottnt{a}   \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B}   \ottsym{)}}{%
{\ottdrulename{ST\_IAbs}}{}%
}}


\newcommand{\ottdruleSTXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \leadsto  \ottnt{b'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vDash_{\mathsf{src} }   \ottnt{b} \  \ottnt{a}   \leadsto   \ottnt{b'} \  \ottnt{a'} ^{ \ottsym{+} }   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a'}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{ST\_App}}{}%
}}


\newcommand{\ottdruleSTXXTApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \leadsto  \ottnt{b'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \mathsf{RolePath} \  \ottnt{b}   \mathrel{+\!\!\!\!\!\!\rightarrow}   \ottmv{F}  @  \ottnt{R}  \ottsym{,}  \overline{R} }%
}{
\Gamma  \vDash_{\mathsf{src} }   \ottnt{b} \  \ottnt{a}   \leadsto   \ottnt{b'} \  \ottnt{a'} ^{ \ottnt{R} }   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{ST\_TApp}}{}%
}}


\newcommand{\ottdruleSTXXIApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \leadsto  \ottnt{b'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} \to \ottnt{B} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \leadsto   \ottnt{b'} \  \Box ^{ \ottsym{-} }   \ottsym{:}  \ottnt{B}  \lbrace  \ottnt{a}  \ottsym{/}  \ottmv{x}  \rbrace}{%
{\ottdrulename{ST\_IApp}}{}%
}}


\newcommand{\ottdruleSTXXConv}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{A}   \equiv _{ \ottkw{Nom} }  \ottnt{B}  :   \star  }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{B}}{%
{\ottdrulename{ST\_Conv}}{}%
}}


\newcommand{\ottdruleSTXXCoerce}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{A}   \equiv _{ \ottkw{Rep} }  \ottnt{B}  :   \star  }%
}{
\Gamma  \vDash_{\mathsf{src} }   \ottkw{coerce} \  \ottnt{a}   \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{B}}{%
{\ottdrulename{ST\_Coerce}}{}%
}}


\newcommand{\ottdruleSTXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \phi  \leadsto  \phi' \, \ \mathsf{ok}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi'  \vDash_{\mathsf{src} }  \ottnt{B}  \leadsto  \ottnt{B'}  \ottsym{:}   \star }%
}{
\Gamma  \vDash_{\mathsf{src} }   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \leadsto   \forall \ottmv{c} \!:\! \phi . \ottnt{B'}   \ottsym{:}   \star }{%
{\ottdrulename{ST\_CPi}}{}%
}}


\newcommand{\ottdruleSTXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto   \mathrm{\Lambda} \ottmv{c} . \ottnt{a'}   \ottsym{:}   \forall \ottmv{c} \!:\! \phi . \ottnt{B} }{%
{\ottdrulename{ST\_CAbs}}{}%
}}


\newcommand{\ottdruleSTXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a_{{\mathrm{1}}}}  \leadsto  \ottnt{a'_{{\mathrm{1}}}}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}} }%
\ottpremise{ \Gamma  ;   \widetilde { \Gamma }    \vDash   \ottnt{a}   \equiv _{ \ottnt{R} }  \ottnt{b}  :  \ottnt{A} }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottnt{a_{{\mathrm{1}}}}  \leadsto   \ottnt{a'_{{\mathrm{1}}}} \; \bullet   \ottsym{:}  \ottnt{B_{{\mathrm{1}}}}  \lbrace  \bullet  \ottsym{/}  \ottmv{c}  \rbrace}{%
{\ottdrulename{ST\_CApp}}{}%
}}


\newcommand{\ottdruleSTXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{F}  \ottsym{:}   \ottnt{A} \  \ottsym{@} \  \overline{R}  \, \in \,  \Sigma_0 }%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottmv{F}  \leadsto  \ottmv{F}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{ST\_Const}}{}%
}}


\newcommand{\ottdruleSTXXFam}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottmv{F}  \leadsto  \ottmv{F}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{ST\_Fam}}{}%
}}


\newcommand{\ottdruleSTXXCase}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b_{{\mathrm{1}}}}  \leadsto  \ottnt{b'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B}}%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b_{{\mathrm{2}}}}  \leadsto  \ottnt{b'_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{C}}%
}{
\Gamma  \vDash_{\mathsf{src} }   \mathsf{case} \hspace{3pt}  \ottnt{a}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b_{{\mathrm{2}}}}   \leadsto   \mathsf{case} \hspace{3pt}  \ottnt{a'}  \hspace{3pt} \mathsf{of} \hspace{3pt}  \ottmv{F} \  \overline{\upsilon}  \rightarrow  \ottnt{b'_{{\mathrm{1}}}}  \| \_ \rightarrow  \ottnt{b'_{{\mathrm{2}}}}   \ottsym{:}  \ottnt{C}}{%
{\ottdrulename{ST\_Case}}{}%
}}

\newcommand{\ottdefnSrcTrans}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}$}{\ottcom{source translation}}
\ottusedrule{\ottdruleSTXXStar{}}
\ottusedrule{\ottdruleSTXXVar{}}
\ottusedrule{\ottdruleSTXXPi{}}
\ottusedrule{\ottdruleSTXXAbs{}}
\ottusedrule{\ottdruleSTXXIAbs{}}
\ottusedrule{\ottdruleSTXXApp{}}
\ottusedrule{\ottdruleSTXXTApp{}}
\ottusedrule{\ottdruleSTXXIApp{}}
\ottusedrule{\ottdruleSTXXConv{}}
\ottusedrule{\ottdruleSTXXCoerce{}}
\ottusedrule{\ottdruleSTXXCPi{}}
\ottusedrule{\ottdruleSTXXCAbs{}}
\ottusedrule{\ottdruleSTXXCApp{}}
\ottusedrule{\ottdruleSTXXConst{}}
\ottusedrule{\ottdruleSTXXFam{}}
\ottusedrule{\ottdruleSTXXCase{}}
\end{ottdefnblock}}

%% defn SrcPropWff
\newcommand{\ottdruleSXXWff}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vDash_{\mathsf{src} }  \ottnt{b}  \leadsto  \ottnt{b'}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vDash_{\mathsf{src} }  \ottsym{(}   \ottnt{a}   \sim _{ \ottkw{Nom} }  \ottnt{b}  :  \ottnt{A}   \ottsym{)}  \leadsto  \ottsym{(}   \ottnt{a'}   \sim _{ \ottkw{Nom} }  \ottnt{b'}  :  \ottnt{A}   \ottsym{)} \, \ \mathsf{ok}}{%
{\ottdrulename{S\_Wff}}{}%
}}

\newcommand{\ottdefnSrcPropWff}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vDash_{\mathsf{src} }  \phi  \leadsto  \phi' \, \ \mathsf{ok}$}{\ottcom{Prop wellformedness}}
\ottusedrule{\ottdruleSXXWff{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSrc}{
\ottdefnSrcTyping{}\ottdefnSrcTrans{}\ottdefnSrcPropWff{}}

% defns Jann
%% defn AnnPropWff

\newcommand{\ottdefnAnnPropWff}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \phi \, \ \mathsf{ok}$}{\ottcom{prop wellformedness}}
\end{ottdefnblock}}

%% defn AnnTyping

\newcommand{\ottdefnAnnTyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}$}{\ottcom{typing}}
\end{ottdefnblock}}

%% defn AnnIso

\newcommand{\ottdefnAnnIso}[1]{\begin{ottdefnblock}[#1]{$ \Gamma ; \Delta \vdash   \gamma  :  \phi_{{\mathrm{1}}}  \sim  \phi_{{\mathrm{2}}} $}{\ottcom{coercion between props}}
\end{ottdefnblock}}

%% defn AnnDefEq

\newcommand{\ottdefnAnnDefEq}[1]{\begin{ottdefnblock}[#1]{$ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} $}{\ottcom{coercion between types}}
\end{ottdefnblock}}

%% defn AnnCtx

\newcommand{\ottdefnAnnCtx}[1]{\begin{ottdefnblock}[#1]{$\vdash  \Gamma$}{\ottcom{context wellformedness}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJann}{
\ottdefnAnnPropWff{}\ottdefnAnnTyping{}\ottdefnAnnIso{}\ottdefnAnnDefEq{}\ottdefnAnnCtx{}}

% defns Jred
%% defn head_reduction

\newcommand{\ottdefnheadXXreduction}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}$}{\ottcom{single-step, weak head reduction to
   values for annotated language}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJred}{
\ottdefnheadXXreduction{}}

\newcommand{\ottdefnss}{
\ottdefnsJSubRole
\ottdefnsJRolePath
\ottdefnsJAppsPath
\ottdefnsJSat
\ottdefnsJPatCtx
\ottdefnsJRename
\ottdefnsJMatchSubst
\ottdefnsJIsPattern
\ottdefnsJSubPat
\ottdefnsJTmPatternAgree
\ottdefnsJTmSubPatternAgree
\ottdefnsJSubTmPatternAgree
\ottdefnsJValuePath
\ottdefnsJCasePath
\ottdefnsJApplyArgs
\ottdefnsJValue
\ottdefnsJValueType
\ottdefnsJconsistent
\ottdefnsJroleing
\ottdefnsJChk
\ottdefnsJpar
\ottdefnsJbeta
\ottdefnsJBranchTyping
\ottdefnsJett
\ottdefnsJsig
\ottdefnsJhiding
\ottdefnsJSrc
\ottdefnsJann
\ottdefnsJred
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        222 good    0 bad
Definition rule clauses: 612 good    0 bad
\end{verbatim}
\end{document}
